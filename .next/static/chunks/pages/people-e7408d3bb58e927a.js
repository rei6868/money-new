(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[563],{1026:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/people",function(){return n(8853)}])},8350:function(e,t,n){"use strict";n.d(t,{Q:function(){return useRequireAuth}});var r=n(1163),l=n(7294),o=n(6770);function useRequireAuth(){let e=(0,r.useRouter)(),{isAuthenticated:t,isLoading:n}=(0,o.a)();return(0,l.useEffect)(()=>{!n&&(t||e.replace("/login"))},[t,n,e]),{isAuthenticated:t,isLoading:n}}},8853:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return PeoplePage}});var r=n(5893),l=n(7294),o=n(1163),s=n(2568),i=n(8350);function PeoplePage(){let e=(0,o.useRouter)(),{isAuthenticated:t,isLoading:n}=(0,i.Q)(),[d,c]=(0,l.useState)([]),[a,p]=(0,l.useState)(!1),[u,h]=(0,l.useState)(null);(0,l.useEffect)(()=>{if(n||!t)return;let e=!1,fetchPeople=async()=>{p(!0),h(null);try{let t=await fetch("/api/people");if(!t.ok)throw Error("Request failed with status ".concat(t.status));let n=await t.json(),r=Array.isArray(n)?n:null==n?void 0:n.people;e||(c(Array.isArray(r)?r:[]),Array.isArray(r)||console.warn("Unexpected response shape when fetching people",n))}catch(t){e||(console.error("Failed to load people",t),h("Unable to load people right now."))}finally{e||p(!1)}};return fetchPeople(),()=>{e=!0}},[n,t]);let f=(0,l.useMemo)(()=>null!=d?d:[],[d]);return n||!t?null:(0,r.jsxs)(s.Z,{title:"People",subtitle:"Manage individuals linked to accounts, transactions, and reimbursements.",children:[(0,r.jsx)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"1rem"},children:(0,r.jsx)("button",{type:"button",onClick:()=>{e.push("/people/new").catch(e=>{console.error("Failed to navigate to create person page",e)})},style:{padding:"0.5rem 1rem",cursor:"pointer"},children:"Add New Person"})}),a&&(0,r.jsx)("p",{children:"Loading peopleâ€¦"}),u&&!a&&(0,r.jsx)("p",{style:{color:"red"},children:u}),!a&&!u&&(0,r.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:"0.5rem"},children:"Full Name"}),(0,r.jsx)("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:"0.5rem"},children:"Status"}),(0,r.jsx)("th",{style:{textAlign:"left",borderBottom:"1px solid #ccc",padding:"0.5rem"},children:"Actions"})]})}),(0,r.jsx)("tbody",{children:0===f.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:3,style:{padding:"0.75rem"},children:"No people found yet."})}):f.map(e=>(0,r.jsxs)("tr",{style:{borderBottom:"1px solid #eee"},children:[(0,r.jsx)("td",{style:{padding:"0.75rem"},children:e.fullName}),(0,r.jsx)("td",{style:{padding:"0.75rem",textTransform:"capitalize"},children:e.status}),(0,r.jsxs)("td",{style:{padding:"0.75rem"},children:[(0,r.jsx)("button",{type:"button",onClick:()=>console.log("Edit person",e.personId),style:{marginRight:"0.5rem",padding:"0.25rem 0.5rem",cursor:"pointer"},children:"Edit"}),(0,r.jsx)("button",{type:"button",onClick:()=>console.log("Delete person",e.personId),style:{padding:"0.25rem 0.5rem",cursor:"pointer"},children:"Delete"})]})]},e.personId))})]})]})}}},function(e){e.O(0,[285,568,774,888,179],function(){return e(e.s=1026)}),_N_E=e.O()}]);