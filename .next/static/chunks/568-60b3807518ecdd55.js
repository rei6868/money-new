(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[568],{2568:function(e,a,n){"use strict";n.d(a,{Z:function(){return AppLayout}});var t=n(5893),l=n(7294),r=n(1664),o=n.n(r),i=n(1163),s=n(3692),c=n(6770),u=n(757),d=n.n(u);function TopNavBar(e){let{navItems:a=[],activeKeys:n,onToggleTheme:r,onLogout:i,theme:c="light",settingsLink:u}=e,p=(0,l.useMemo)(()=>n?n instanceof Set?n:Array.isArray(n)?new Set(n):new Set([n]):new Set,[n]),[h,v]=(0,l.useState)([]),[m,_]=(0,l.useState)(null),b=(0,l.useRef)(null),y=(0,l.useRef)(null),k=(0,l.useRef)(null),f=(0,l.useRef)(null),L=(0,l.useRef)(new Map),g=(0,l.useRef)(new Map),N=(0,l.useMemo)(()=>{let e=[];return a.forEach(a=>{a&&a.href&&e.push({key:a.key,label:a.label,href:a.href}),Array.isArray(null==a?void 0:a.children)&&a.children.forEach(a=>{a&&a.href&&e.push({key:a.key,label:a.label,href:a.href})})}),(null==u?void 0:u.href)&&e.push({key:u.key,label:u.label,href:u.href}),e},[a,u]),x=(0,l.useCallback)((e,a)=>{L.current||(L.current=new Map),a?L.current.set(e,a):L.current.delete(e)},[]),j=(0,l.useCallback)(()=>{let e=new Map(g.current);N.forEach(a=>{let n=L.current.get(a.key);if(n){let t=n.getBoundingClientRect();t.width>0&&e.set(a.key,t.width)}}),g.current=e},[N]),A=(0,l.useCallback)(()=>{var e,a;let n=b.current;if(!n)return;j();let t=n.offsetWidth,l=(null===(e=y.current)||void 0===e?void 0:e.offsetWidth)||64,r=N.map(e=>g.current.get(e.key)||0),o=r.length,i=r.reduce((e,a)=>e+a,0);if(i<=t){0!==h.length&&(v([]),"overflow"===m&&_(null));return}for(;o>0&&i+l>t;)o-=1,i-=null!==(a=r[o])&&void 0!==a?a:0;let s=N.slice(o).map(e=>e.key);v(s),0===s.length&&"overflow"===m&&_(null)},[N,j,h.length,m]);(0,l.useEffect)(()=>{A()},[A,c]);let T=(0,l.useMemo)(()=>new Set(h),[h]),w=null!==m,M="overflow"===m,C="mobile"===m;(0,l.useEffect)(()=>{let e=b.current;if(!e)return;let a=new ResizeObserver(()=>{A()});return a.observe(e),window.addEventListener("resize",A),()=>{a.disconnect(),window.removeEventListener("resize",A)}},[A]),(0,l.useEffect)(()=>{if(!w)return;let handlePointerDown=e=>{let a=k.current,n=f.current,t="overflow"===m?a:n;t&&t.contains(e.target)||_(null)};return document.addEventListener("pointerdown",handlePointerDown),()=>{document.removeEventListener("pointerdown",handlePointerDown)}},[w,m]),(0,l.useEffect)(()=>{0===h.length&&"overflow"===m&&_(null)},[h.length,m]);let S=N.filter(e=>T.has(e.key)),B=(0,l.useMemo)(()=>{let e=N.find(e=>p.has(e.key));return(null==e?void 0:e.label)||"Menu"},[N,p]),E=(0,l.useCallback)(()=>{_(null)},[]),G=(0,l.useId)();if(0===N.length)return null;let renderNavLink=function(e){let{inOverflow:a=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=p.has(e.key),l="".concat(d().navLink," ").concat(n?d().navLinkActive:"").trim(),r=(0,t.jsx)(o(),{href:e.href,className:l,"data-overflow":a?"true":void 0,onClick:E,children:e.label});return a?(0,t.jsx)("li",{children:r},"overflow-".concat(e.key)):(0,t.jsx)("li",{ref:a=>x(e.key,a),className:T.has(e.key)?d().navItemHidden:d().navItem,"data-key":e.key,children:r},e.key)};return(0,t.jsxs)("nav",{className:d().navBar,"aria-label":"Primary navigation",children:[(0,t.jsx)(o(),{href:"/transactions",className:d().brandLink,onClick:E,"aria-label":"Money Flow home",children:(0,t.jsx)("span",{className:d().brandMark,children:"MF"})}),(0,t.jsxs)("div",{className:d().mobileMenuWrapper,ref:f,children:[(0,t.jsxs)("button",{type:"button",className:d().mobileTrigger,onClick:()=>{_(e=>"mobile"===e?null:"mobile")},"aria-haspopup":"menu","aria-expanded":C,"aria-controls":G,"aria-label":"Open navigation menu",children:[(0,t.jsx)("span",{className:d().mobileLabel,children:B}),(0,t.jsx)(s.bTu,{className:d().mobileChevron,"aria-hidden":"true"})]}),C?(0,t.jsx)("div",{className:d().mobileMenu,role:"menu",id:G,children:(0,t.jsx)("ul",{className:d().mobileMenuList,children:N.map(e=>renderNavLink(e,{inOverflow:!0}))})}):null]}),(0,t.jsx)("div",{className:d().navListWrapper,ref:b,children:(0,t.jsx)("ul",{className:d().navList,children:N.map(e=>renderNavLink(e))})}),(0,t.jsxs)("div",{className:d().navActions,children:[(0,t.jsxs)("div",{className:d().moreWrapper,"data-active":S.length>0?"true":"false",ref:k,children:[(0,t.jsxs)("button",{type:"button",className:"".concat(d().iconButton," ").concat(d().moreTrigger),"aria-haspopup":"menu","aria-expanded":M,onClick:()=>{0!==S.length&&_(e=>"overflow"===e?null:"overflow")},ref:y,disabled:0===S.length,children:[(0,t.jsx)(s.K9M,{"aria-hidden":"true"}),(0,t.jsx)("span",{className:d().visuallyHidden,children:"Open overflow navigation links"})]}),M?(0,t.jsx)("div",{className:d().moreMenu,role:"menu",children:(0,t.jsx)("ul",{className:d().moreMenuList,children:(S.length>0?S:N).map(e=>renderNavLink(e,{inOverflow:!0}))})}):null]}),(0,t.jsx)("button",{type:"button",className:d().iconButton,onClick:r,"aria-label":"dark"===c?"Switch to light theme":"Switch to dark theme",children:"dark"===c?(0,t.jsx)(s.kXG,{"aria-hidden":"true"}):(0,t.jsx)(s.wOW,{"aria-hidden":"true"})}),(0,t.jsx)("button",{type:"button",className:d().iconButton,onClick:i,"aria-label":"Log out",children:(0,t.jsx)(s.xqh,{"aria-hidden":"true"})})]})]})}var p=n(995),h=n.n(p);let v=[{key:"dashboard",label:"Dashboard",href:"/dashboard",icon:s.aCJ},{key:"transactions",label:"Transactions History",href:"/transactions",icon:s.ERY},{key:"accounts",label:"Accounts",href:"/accounts",icon:s.XiQ,description:"Accounts â€“ overview and management"}],m="moneyflow-preferred-theme",_="moneyflow-sidebar-collapsed";function isPathActive(e,a){return"/"===a?"/"===e:e===a||e.startsWith("".concat(a,"/"))}function AppLayout(e){let{title:a,subtitle:n,children:r}=e,u=(0,i.useRouter)(),{logout:d}=(0,c.a)(),[p,b]=(0,l.useState)(()=>(function(){let e=window.localStorage.getItem(_);return"false"!==e})()),[y,k]=(0,l.useState)(()=>(function(){let e=window.localStorage.getItem(m);return"dark"===e||"light"===e?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"})()),[f,L]=(0,l.useState)(null),[g,N]=(0,l.useState)({top:0}),x=(0,l.useRef)({}),j=(0,l.useRef)(null),[A,T]=(0,l.useState)(()=>{let e=u.pathname;return v.filter(a=>{var n;return null===(n=a.children)||void 0===n?void 0:n.some(a=>isPathActive(e,a.href))}).map(e=>e.key)});(0,l.useEffect)(()=>{"undefined"!=typeof document&&(document.documentElement.dataset.theme=y,document.body.dataset.theme=y,window.localStorage.setItem(m,y))},[y]),(0,l.useEffect)(()=>{window.localStorage.setItem(_,p?"true":"false")},[p]),(0,l.useEffect)(()=>{p||T(e=>{let a=new Set(e);return v.forEach(e=>{var n;(null===(n=e.children)||void 0===n?void 0:n.some(e=>isPathActive(u.pathname,e.href)))&&a.add(e.key)}),Array.from(a)})},[u.pathname,p]);let w=(0,l.useMemo)(()=>{let e=u.pathname;return v.reduce((a,n)=>{var t;return n.href&&isPathActive(e,n.href)&&a.add(n.key),null===(t=n.children)||void 0===t||t.forEach(t=>{isPathActive(e,t.href)&&(a.add(t.key),a.add(n.key))}),a},new Set)},[u.pathname]),M=u.pathname.startsWith("/settings"),C=(0,l.useMemo)(()=>{let e=new Set(w);return M&&e.add("settings"),e},[w,M]),handleToggleGroup=e=>{p||T(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])},handleMouseEnterGroup=e=>{if(p){j.current&&(clearTimeout(j.current),j.current=null);let a=x.current[e];if(a){let e=a.getBoundingClientRect();N({top:e.top})}L(e)}},handleMouseLeaveGroup=()=>{p&&(j.current=setTimeout(()=>{L(null)},150))},handleCloseFlyout=()=>{L(null)},handleLogout=()=>{d(),u.replace("/login")},handleToggleTheme=()=>{k(e=>"dark"===e?"light":"dark")},handleFlyoutMouseEnter=()=>{j.current&&(clearTimeout(j.current),j.current=null)},handleFlyoutMouseLeave=()=>{p&&(j.current=setTimeout(()=>{L(null)},150))};(0,l.useEffect)(()=>{L(null)},[u.pathname]);let renderNavLink=e=>{var a,n;let l=e.icon,r=w.has(e.key);return(0,t.jsxs)(o(),{href:e.href,className:"".concat(h().navLink," ").concat(r?h().navLinkActive:""),"data-testid":"sidebar-link-".concat(e.key),title:null!==(a=e.description)&&void 0!==a?a:e.label,"aria-current":r?"page":void 0,"aria-label":null!==(n=e.description)&&void 0!==n?n:e.label,children:[(0,t.jsx)("span",{className:h().iconSlot,children:(0,t.jsx)(l,{})}),(0,t.jsx)("span",{className:h().linkLabel,children:e.label})]},e.key)},renderNavGroup=e=>{var a,n;let l=e.icon,r=A.includes(e.key),i=w.has(e.key),c=p&&f===e.key;return(0,t.jsxs)("div",{className:h().navGroup,onMouseEnter:()=>handleMouseEnterGroup(e.key),onMouseLeave:handleMouseLeaveGroup,children:[(0,t.jsxs)("button",{ref:a=>{x.current[e.key]=a},type:"button",className:"".concat(h().navGroupTrigger," ").concat(i?h().navLinkActive:""),onClick:()=>handleToggleGroup(e.key),"aria-expanded":p?c:r,"aria-controls":p?"sidebar-flyout-".concat(e.key):"sidebar-submenu-".concat(e.key),"data-testid":"sidebar-group-".concat(e.key),title:null!==(a=e.description)&&void 0!==a?a:e.label,"aria-label":null!==(n=e.description)&&void 0!==n?n:e.label,children:[(0,t.jsxs)("span",{className:h().iconSlot,children:[(0,t.jsx)(l,{}),p&&(0,t.jsx)("span",{className:h().collapsedIndicator,"aria-hidden":"true"})]}),(0,t.jsx)("span",{className:h().linkLabel,children:e.label}),(0,t.jsx)(s.bTu,{className:"".concat(h().chevron," ").concat(r?h().chevronOpen:"")})]}),!p&&(0,t.jsx)("div",{id:"sidebar-submenu-".concat(e.key),className:"".concat(h().subNav," ").concat(r?h().subNavOpen:""),role:"group",children:e.children.map(e=>{let a=w.has(e.key);return(0,t.jsxs)(o(),{href:e.href,className:"".concat(h().subNavLink," ").concat(a?h().navLinkActive:""),"data-testid":"sidebar-link-".concat(e.key),title:e.label,"aria-current":a?"page":void 0,"aria-label":e.label,children:[(0,t.jsx)("span",{className:h().bullet,"aria-hidden":!0}),(0,t.jsx)("span",{className:h().linkLabel,children:e.label})]},e.key)})}),p&&c&&(0,t.jsxs)("div",{id:"sidebar-flyout-".concat(e.key),className:h().flyoutMenu,role:"group","aria-label":"".concat(e.label," submenu"),style:{top:"".concat(g.top,"px")},onMouseEnter:handleFlyoutMouseEnter,onMouseLeave:handleFlyoutMouseLeave,children:[(0,t.jsx)("div",{className:h().flyoutHeader,children:(0,t.jsx)("span",{className:h().flyoutTitle,children:e.label})}),(0,t.jsx)("div",{className:h().flyoutContent,children:e.children.map(e=>{let a=w.has(e.key);return(0,t.jsx)(o(),{href:e.href,className:"".concat(h().flyoutLink," ").concat(a?h().flyoutLinkActive:""),"data-testid":"sidebar-flyout-link-".concat(e.key),title:e.label,"aria-current":a?"page":void 0,onClick:handleCloseFlyout,children:e.label},e.key)})})]})]},e.key)};return(0,t.jsxs)("div",{className:h().appShell,"data-testid":"app-root",children:[(0,t.jsxs)("aside",{id:"moneyflow-sidebar",className:"".concat(h().sidebar," ").concat(p?h().sidebarCollapsed:""),children:[(0,t.jsxs)("div",{className:h().brandSection,children:[(0,t.jsx)("button",{type:"button",className:h().collapseTrigger,onClick:()=>{b(e=>!e),L(null)},"aria-pressed":p,"data-testid":"sidebar-collapse-toggle","aria-label":p?"Expand sidebar":"Collapse sidebar",children:(0,t.jsx)(s.cur,{})}),(0,t.jsx)(o(),{href:"/transactions",className:h().brandLink,"aria-label":"Money Flow home","data-testid":"sidebar-brand",children:(0,t.jsx)("div",{className:h().brandCopy,children:(0,t.jsx)("span",{className:h().brandName,children:"Money Flow"})})})]}),(0,t.jsx)("nav",{className:h().nav,role:"navigation","aria-label":"Primary",children:v.map(e=>e.children?renderNavGroup(e):renderNavLink(e))}),(0,t.jsxs)("div",{className:h().sidebarFooter,children:[(0,t.jsxs)(o(),{href:"/settings",className:"".concat(h().navLink," ").concat(M?h().navLinkActive:""),"data-testid":"sidebar-link-settings",title:"Settings","aria-label":"Settings","aria-current":M?"page":void 0,children:[(0,t.jsx)("span",{className:h().iconSlot,children:(0,t.jsx)(s.nbt,{})}),(0,t.jsx)("span",{className:h().linkLabel,children:"Settings"})]}),(0,t.jsxs)("button",{type:"button",className:h().navLink,onClick:handleToggleTheme,"data-testid":"dark-mode-toggle","aria-pressed":"dark"===y,"aria-label":"Toggle dark mode",title:"Toggle dark mode",children:[(0,t.jsx)("span",{className:h().iconSlot,children:"dark"===y?(0,t.jsx)(s.kXG,{}):(0,t.jsx)(s.wOW,{})}),(0,t.jsx)("span",{className:h().linkLabel,children:"Dark Mode"})]}),(0,t.jsxs)("button",{type:"button",className:h().navLink,onClick:handleLogout,"data-testid":"logout-button","aria-label":"Logout",title:"Logout",children:[(0,t.jsx)("span",{className:h().iconSlot,children:(0,t.jsx)(s.xqh,{})}),(0,t.jsx)("span",{className:h().linkLabel,children:"Logout"})]})]})]}),(0,t.jsxs)("div",{className:h().mainColumn,children:[(0,t.jsx)("div",{className:h().topNavBarContainer,children:(0,t.jsx)(TopNavBar,{navItems:v,activeKeys:C,onToggleTheme:handleToggleTheme,onLogout:handleLogout,theme:y,settingsLink:{key:"settings",label:"Settings",href:"/settings"}})}),(0,t.jsx)("main",{className:h().mainContent,"data-testid":"layout-main",children:r})]})]})}},995:function(e){e.exports={appShell:"AppLayout_appShell__vZgFN",sidebar:"AppLayout_sidebar__KpXNR",sidebarCollapsed:"AppLayout_sidebarCollapsed__D3gch",brandSection:"AppLayout_brandSection__qx58r",brandLink:"AppLayout_brandLink__x_9Cz",brandAvatar:"AppLayout_brandAvatar__kUdGb",brandCopy:"AppLayout_brandCopy__BGDDZ",brandName:"AppLayout_brandName__Lwnr7",brandTagline:"AppLayout_brandTagline__wB_mj",collapseTrigger:"AppLayout_collapseTrigger__mltQR",nav:"AppLayout_nav__HLlbI",navGroup:"AppLayout_navGroup__Z0E6R",navLink:"AppLayout_navLink__eu9M7",navGroupTrigger:"AppLayout_navGroupTrigger__qq6kG",navLinkActive:"AppLayout_navLinkActive___cPu5",iconSlot:"AppLayout_iconSlot__MUEmN",collapsedIndicator:"AppLayout_collapsedIndicator__kXPDV",linkLabel:"AppLayout_linkLabel__GNk_1",chevron:"AppLayout_chevron__GzYP5",chevronOpen:"AppLayout_chevronOpen__6OyLl",subNav:"AppLayout_subNav__g6Q0b",subNavOpen:"AppLayout_subNavOpen__DAAaT",subNavLink:"AppLayout_subNavLink__nd4Vs",bullet:"AppLayout_bullet__cKBpj",sidebarFooter:"AppLayout_sidebarFooter__LBACF",mainColumn:"AppLayout_mainColumn__fsUA8",topNavBarContainer:"AppLayout_topNavBarContainer__CxB6m",mainContent:"AppLayout_mainContent__rg1ur",flyoutMenu:"AppLayout_flyoutMenu__m2FSX",flyoutSlideIn:"AppLayout_flyoutSlideIn__Wru_V",flyoutHeader:"AppLayout_flyoutHeader__jxXpU",flyoutTitle:"AppLayout_flyoutTitle__SpcvL",flyoutContent:"AppLayout_flyoutContent__2qbNh",flyoutLink:"AppLayout_flyoutLink__h3Jie",flyoutLinkActive:"AppLayout_flyoutLinkActive__eGVLj",slideIn:"AppLayout_slideIn__etVzU"}},757:function(e){e.exports={navBar:"TopNavBar_navBar__m4jJM",brandLink:"TopNavBar_brandLink__Vg142",brandMark:"TopNavBar_brandMark__0rtSM",navListWrapper:"TopNavBar_navListWrapper__7j0k3",navList:"TopNavBar_navList__p5Z3i",navItem:"TopNavBar_navItem__YU1Ud",navItemHidden:"TopNavBar_navItemHidden__SxDs4",navLink:"TopNavBar_navLink__9mq6n",navLinkActive:"TopNavBar_navLinkActive__bjyo7",navActions:"TopNavBar_navActions__7ler7",iconButton:"TopNavBar_iconButton__lVxXm",moreWrapper:"TopNavBar_moreWrapper__qAz_4",moreTrigger:"TopNavBar_moreTrigger__IVYCb",moreMenu:"TopNavBar_moreMenu__0LvXm",moreMenuList:"TopNavBar_moreMenuList__E_7_K",mobileMenuWrapper:"TopNavBar_mobileMenuWrapper__IIDiy",mobileTrigger:"TopNavBar_mobileTrigger__4K3OQ",mobileLabel:"TopNavBar_mobileLabel__DR7NS",mobileMenu:"TopNavBar_mobileMenu__sMG_G",mobileMenuList:"TopNavBar_mobileMenuList__PF67Y",mobileChevron:"TopNavBar_mobileChevron__1lSpW",visuallyHidden:"TopNavBar_visuallyHidden__gO2Fu"}}}]);