exports.id=6058,exports.ids=[6058],exports.modules={5188:e=>{e.exports={overlay:"AddAccountOverlay_overlay__4yad_",fadeIn:"AddAccountOverlay_fadeIn__NJRFe",dialog:"AddAccountOverlay_dialog__KjAgT",slideUp:"AddAccountOverlay_slideUp__E_mQ8",header:"AddAccountOverlay_header__HsEVV",title:"AddAccountOverlay_title__xkZl_",closeButton:"AddAccountOverlay_closeButton__348Vf",content:"AddAccountOverlay_content__LoLlx",field:"AddAccountOverlay_field__bZXG0",fieldLabel:"AddAccountOverlay_fieldLabel__Wgs8u",input:"AddAccountOverlay_input__vcMuo",textarea:"AddAccountOverlay_textarea__YDmql",footer:"AddAccountOverlay_footer__FgSfB",primaryButton:"AddAccountOverlay_primaryButton__bftDX",secondaryButton:"AddAccountOverlay_secondaryButton__VIzOR",slideUpMobile:"AddAccountOverlay_slideUpMobile__TIL8n"}},6233:e=>{e.exports={container:"AmountInput_container__1h9fN",label:"AmountInput_label__SGIOe",input:"AmountInput_input____kqZ",amountWordsNumber:"AmountInput_amountWordsNumber__BYoM8",suggestionsContainer:"AmountInput_suggestionsContainer__Mt3da",suggestionButton:"AmountInput_suggestionButton__eLmE3",historyText:"AmountInput_historyText___IzUc",historyError:"AmountInput_historyError__8MS6b",inputErrorText:"AmountInput_inputErrorText__kbNRT"}},2341:e=>{e.exports={overlay:"ConfirmationModal_overlay__5WdIp",modal:"ConfirmationModal_modal__If8Xd",title:"ConfirmationModal_title__ZZNUI",message:"ConfirmationModal_message__wKZ_c",actions:"ConfirmationModal_actions__Z1k9j",cancelButton:"ConfirmationModal_cancelButton__wB6uX",confirmButton:"ConfirmationModal_confirmButton__9aQeE",confirmButtonPrimary:"ConfirmationModal_confirmButtonPrimary___khWF",confirmButtonDanger:"ConfirmationModal_confirmButtonDanger__daTuz"}},8491:e=>{e.exports={dropdown:"ReusableDropdown_dropdown__xSkcb",trigger:"ReusableDropdown_trigger__nXl0p",triggerText:"ReusableDropdown_triggerText__MPsv4",label:"ReusableDropdown_label__yDymJ",triggerIcons:"ReusableDropdown_triggerIcons__lHo38",clearButton:"ReusableDropdown_clearButton__ngWSE",chevronIcon:"ReusableDropdown_chevronIcon__FNAxq",menu:"ReusableDropdown_menu__C_Z4H",searchWrapper:"ReusableDropdown_searchWrapper__3ZSyv",menuNewAction:"ReusableDropdown_menuNewAction___7ykb",searchInput:"ReusableDropdown_searchInput__ylOYA",optionsList:"ReusableDropdown_optionsList__fNT4D",optionButton:"ReusableDropdown_optionButton__wz9oM",emptyState:"ReusableDropdown_emptyState__6I3Be",newButton:"ReusableDropdown_newButton__e864t"}},4780:e=>{e.exports={tableCard:"TableBase_tableCard__zP3bW",tableShell:"TableBase_tableShell__gU_ef",tableScroll:"TableBase_tableScroll__cAtRZ",table:"TableBase_table__gnTTT",stickyLeft:"TableBase_stickyLeft__szOLQ",stickyRight:"TableBase_stickyRight__fpYpO",bodyCell:"TableBase_bodyCell__YGJP8",checkboxCell:"TableBase_checkboxCell__p0va0",actionsCell:"TableBase_actionsCell___uQWv",checkboxCellInner:"TableBase_checkboxCellInner__g3p_U",cellAlignRight:"TableBase_cellAlignRight__9AvWS",cellAlignCenter:"TableBase_cellAlignCenter__6jPYb",bodyCellHidden:"TableBase_bodyCellHidden__fPNwi",totalRow:"TableBase_totalRow__AzmZb",totalLabel:"TableBase_totalLabel__VwqAu",totalCell:"TableBase_totalCell__IgnEz",totalValue:"TableBase_totalValue__Du9N3",totalAmount:"TableBase_totalAmount__erGhA",paginationBar:"TableBase_paginationBar__SVMUy",paginationSticky:"TableBase_paginationSticky__cA9Xr",paginationInline:"TableBase_paginationInline__mOaSM",loadingIndicator:"TableBase_loadingIndicator__fgUNL",selectionToolbar:"TableBase_selectionToolbar__uo9AH",selectionToolbarDock:"TableBase_selectionToolbarDock__lBpmE",selectionToolbarEnter:"TableBase_selectionToolbarEnter__jRrQI",selectionToolbarInfo:"TableBase_selectionToolbarInfo__8_PYs",selectionToolbarCount:"TableBase_selectionToolbarCount__l5Za4",selectionToolbarLabel:"TableBase_selectionToolbarLabel__iRbQ7",selectionToolbarActions:"TableBase_selectionToolbarActions__4DC_R",selectionToolbarButton:"TableBase_selectionToolbarButton__16rML",selectionToolbarDanger:"TableBase_selectionToolbarDanger__BBie_"}},7792:e=>{e.exports={row:"TableBaseBody_row__J4nrS",rowSelected:"TableBaseBody_rowSelected__z2GvJ",rowSelectFlash:"TableBaseBody_rowSelectFlash__ky_jH",amountValue:"TableBaseBody_amountValue__3OXX3",amountIncome:"TableBaseBody_amountIncome__LJj_x",amountTransfer:"TableBaseBody_amountTransfer__jRDBZ",amountExpense:"TableBaseBody_amountExpense___THI9",totalBackCell:"TableBaseBody_totalBackCell__ESmzN",totalBackValue:"TableBaseBody_totalBackValue__HeGQu",totalBackFormula:"TableBaseBody_totalBackFormula__DtN7i",pill:"TableBaseBody_pill__E3ssY",pillIncome:"TableBaseBody_pillIncome__pUv0V",pillExpense:"TableBaseBody_pillExpense__4KQax",pillTransfer:"TableBaseBody_pillTransfer__26LTN",pillNeutral:"TableBaseBody_pillNeutral__vDk4j",inlineActions:"TableBaseBody_inlineActions__m_wWm",inlineEditButton:"TableBaseBody_inlineEditButton__X_G_W",emptyCell:"TableBaseBody_emptyCell__LPiVV",tooltipPortal:"TableBaseBody_tooltipPortal__Sy_ku"}},314:e=>{e.exports={tableHeader:"TableBaseHeader_tableHeader___MK_g",headerCell:"TableBaseHeader_headerCell__UpXFA",headerShell:"TableBaseHeader_headerShell__kBwBb",headerShellReorder:"TableBaseHeader_headerShellReorder__JSptq",headerContent:"TableBaseHeader_headerContent__zsE3T",headerLabel:"TableBaseHeader_headerLabel__PkE0P",headerLabelText:"TableBaseHeader_headerLabelText__JKtwj",taskHeaderCell:"TableBaseHeader_taskHeaderCell__5XlLo",taskHeaderShell:"TableBaseHeader_taskHeaderShell__W7q8u",taskHeaderIcon:"TableBaseHeader_taskHeaderIcon__2T1Ls",visuallyHidden:"TableBaseHeader_visuallyHidden__FPLtb",headerReorder:"TableBaseHeader_headerReorder__OncfW",headerDropTarget:"TableBaseHeader_headerDropTarget__6AojU",headerHidden:"TableBaseHeader_headerHidden__GoWm8",columnToggle:"TableBaseHeader_columnToggle__oRhh4",toggleTrack:"TableBaseHeader_toggleTrack__hrNWN",toggleThumb:"TableBaseHeader_toggleThumb__GejhB",sortButton:"TableBaseHeader_sortButton__u2zq0",sortButtonActive:"TableBaseHeader_sortButtonActive__E0Pgz",sortSpinner:"TableBaseHeader_sortSpinner__iJ6CJ",headerSpinner:"TableBaseHeader_headerSpinner__frdci",headerCheckboxInner:"TableBaseHeader_headerCheckboxInner___009t"}},2055:e=>{e.exports={overlay:"AddTransactionModal_overlay__GyxCM",modal:"AddTransactionModal_modal__5tCrr",modalBody:"AddTransactionModal_modalBody__KqKks",header:"AddTransactionModal_header__tnrr6",title:"AddTransactionModal_title__SOkSe",subtitle:"AddTransactionModal_subtitle__7vtKw",closeButton:"AddTransactionModal_closeButton__A6caU",transactionTypeSelector:"AddTransactionModal_transactionTypeSelector__dK3w_",transactionTypeSegmented:"AddTransactionModal_transactionTypeSegmented__uQu9m",tabPanel:"AddTransactionModal_tabPanel__I3V39",field:"AddTransactionModal_field__6NNJW",fieldLabelRow:"AddTransactionModal_fieldLabelRow__2foeT",fieldLabel:"AddTransactionModal_fieldLabel__z_d9B",dateDisplay:"AddTransactionModal_dateDisplay__t6rA9",amountWordsPlaceholderInline:"AddTransactionModal_amountWordsPlaceholderInline__hDu3m",formFieldBase:"AddTransactionModal_formFieldBase__nCk9B",input:"AddTransactionModal_input__tnkzS",dropdownField:"AddTransactionModal_dropdownField__FQ1Ue",formGrid:"AddTransactionModal_formGrid__jhnXa",debtSection:"AddTransactionModal_debtSection___u1hk",debtGrid:"AddTransactionModal_debtGrid__tyJjI",gridField:"AddTransactionModal_gridField__0RtRE",debtTypeGroup:"AddTransactionModal_debtTypeGroup__hWRPA",debtTypeHeader:"AddTransactionModal_debtTypeHeader__vuXz7",debtTypeToggle:"AddTransactionModal_debtTypeToggle__vIZr8",debtTypeToggleDebt:"AddTransactionModal_debtTypeToggleDebt__tc_Vw",debtTypeToggleRepay:"AddTransactionModal_debtTypeToggleRepay__0L0a_",debtTypeOption:"AddTransactionModal_debtTypeOption__xMbDu",debtTypeThumb:"AddTransactionModal_debtTypeThumb__R_qdD",dateField:"AddTransactionModal_dateField__3v4Mg",toggleField:"AddTransactionModal_toggleField__6oBuO",switchButton:"AddTransactionModal_switchButton__8kWj2",switchTrack:"AddTransactionModal_switchTrack__5n9T7",switchThumb:"AddTransactionModal_switchThumb__pMgAW",switchButtonActive:"AddTransactionModal_switchButtonActive__od_iB",cashbackSection:"AddTransactionModal_cashbackSection__oWFOq",cashbackInputRow:"AddTransactionModal_cashbackInputRow__rFG2r",percentBackInput:"AddTransactionModal_percentBackInput__MT2R_",fixedBackInput:"AddTransactionModal_fixedBackInput__4Y1OE",noBackEngToggle:"AddTransactionModal_noBackEngToggle__fGetk",cashbackHint:"AddTransactionModal_cashbackHint__T08df",debtNotesField:"AddTransactionModal_debtNotesField__RXJqd",transferSection:"AddTransactionModal_transferSection__hcQH0",formRow:"AddTransactionModal_formRow__b_EP3",notesFieldContainer:"AddTransactionModal_notesFieldContainer__xt29v",inputWrapper:"AddTransactionModal_inputWrapper__fiGnT",notesActions:"AddTransactionModal_notesActions__i43zP",notesIconButton:"AddTransactionModal_notesIconButton__Um44w",notesClearButton:"AddTransactionModal_notesClearButton__SQ6s8",notesRestoreButton:"AddTransactionModal_notesRestoreButton__X2Ct_",textarea:"AddTransactionModal_textarea__i3fxF",fieldError:"AddTransactionModal_fieldError__iNUWn",fullRow:"AddTransactionModal_fullRow__BKCqM",mockOverlay:"AddTransactionModal_mockOverlay__xg5_Q",mockModal:"AddTransactionModal_mockModal__QOwgI",mockModalTitle:"AddTransactionModal_mockModalTitle__Tfz1G",mockModalBody:"AddTransactionModal_mockModalBody__lSan1",mockModalButton:"AddTransactionModal_mockModalButton__gll0G",actions:"AddTransactionModal_actions__vYa3_",secondaryButton:"AddTransactionModal_secondaryButton__5t39Z",primaryButton:"AddTransactionModal_primaryButton__BsJpY"}},3130:e=>{e.exports={segmentedControl:"SegmentedControl_segmentedControl__Xm8GU",segmentedControlTrack:"SegmentedControl_segmentedControlTrack__DRDxE",segmentedControlThumb:"SegmentedControl_segmentedControlThumb__Bmqf7",segmentedControlThumbNeutral:"SegmentedControl_segmentedControlThumbNeutral__A2yDA",segmentedControlThumbPositive:"SegmentedControl_segmentedControlThumbPositive__KxKLF",segmentedControlThumbNegative:"SegmentedControl_segmentedControlThumbNegative__O5GcS",segmentedControlOption:"SegmentedControl_segmentedControlOption__Z2q9O",segmentedControlOptionNeutral:"SegmentedControl_segmentedControlOptionNeutral__qAwSc",segmentedControlOptionPositive:"SegmentedControl_segmentedControlOptionPositive__5j2i5",segmentedControlOptionNegative:"SegmentedControl_segmentedControlOptionNegative__Ebwth",segmentedControlOptionActive:"SegmentedControl_segmentedControlOptionActive__xjLq_"}},2996:e=>{e.exports={overlay:"AddModalGlobal_overlay__GStQG",dialog:"AddModalGlobal_dialog__gDqlh",header:"AddModalGlobal_header__gWK_v",title:"AddModalGlobal_title___WcRe",closeButton:"AddModalGlobal_closeButton__b6hgf",content:"AddModalGlobal_content__r8ZC0",field:"AddModalGlobal_field__k3LP0",fieldLabel:"AddModalGlobal_fieldLabel__9BAya",input:"AddModalGlobal_input__IV5_4",textarea:"AddModalGlobal_textarea__6lAXs",footer:"AddModalGlobal_footer__Wg45v",primaryButton:"AddModalGlobal_primaryButton__d4J4i",secondaryButton:"AddModalGlobal_secondaryButton__bWdOu"}},9893:e=>{e.exports={root:"CustomizeColumnsModal_root__S62vs",backdrop:"CustomizeColumnsModal_backdrop__KsI9r",wrapper:"CustomizeColumnsModal_wrapper__6ztr8",panel:"CustomizeColumnsModal_panel__ZLz17",header:"CustomizeColumnsModal_header__TmdNU",title:"CustomizeColumnsModal_title__TfK0G",subtitle:"CustomizeColumnsModal_subtitle__rf2Uo",headerButtons:"CustomizeColumnsModal_headerButtons__yAJej",headerButton:"CustomizeColumnsModal_headerButton__L00Ha",closeButton:"CustomizeColumnsModal_closeButton__xoVWs",columnList:"CustomizeColumnsModal_columnList__z1Xq8",columnItem:"CustomizeColumnsModal_columnItem__mpdkU",columnDragHandle:"CustomizeColumnsModal_columnDragHandle__u75zi",columnChipBody:"CustomizeColumnsModal_columnChipBody__buOxr",columnMeta:"CustomizeColumnsModal_columnMeta__4EYqS",columnLabel:"CustomizeColumnsModal_columnLabel__66aBP",columnHint:"CustomizeColumnsModal_columnHint__2siCH",columnControls:"CustomizeColumnsModal_columnControls__h_pjp",lockBadge:"CustomizeColumnsModal_lockBadge__TqpyD",columnControlButton:"CustomizeColumnsModal_columnControlButton__wgBFC",pinControls:"CustomizeColumnsModal_pinControls__W2opQ",pinButton:"CustomizeColumnsModal_pinButton__zMbRc",backdropEnter:"CustomizeColumnsModal_backdropEnter__Mqd_x",backdropEnterFrom:"CustomizeColumnsModal_backdropEnterFrom__JhV_l",backdropEnterTo:"CustomizeColumnsModal_backdropEnterTo__mhAdT",backdropLeave:"CustomizeColumnsModal_backdropLeave__O24CR",backdropLeaveFrom:"CustomizeColumnsModal_backdropLeaveFrom__yiMXK",backdropLeaveTo:"CustomizeColumnsModal_backdropLeaveTo__SJnj_",panelEnter:"CustomizeColumnsModal_panelEnter__OF_WB",panelEnterFrom:"CustomizeColumnsModal_panelEnterFrom__kKO9T",panelEnterTo:"CustomizeColumnsModal_panelEnterTo__e0cn4",panelLeave:"CustomizeColumnsModal_panelLeave__9Y3as",panelLeaveFrom:"CustomizeColumnsModal_panelLeaveFrom__rQYF0",panelLeaveTo:"CustomizeColumnsModal_panelLeaveTo__2ML7s"}},3034:e=>{e.exports={container:"LoadingOverlay_container___ZyDl",spinner:"LoadingOverlay_spinner__wv42l",overlaySpin:"LoadingOverlay_overlaySpin__9N_1_",label:"LoadingOverlay_label__MX5yb"}},4687:e=>{e.exports={toolbar:"MiniToolbar_toolbar__8Fv_x",slideUp:"MiniToolbar_slideUp__zzBYE",count:"MiniToolbar_count__NJOTT",actions:"MiniToolbar_actions__lqgnP",actionButton:"MiniToolbar_actionButton__noD1U"}},1723:e=>{e.exports={root:"QuickAddModal_root__QaXsK",backdrop:"QuickAddModal_backdrop__EgMXK",wrapper:"QuickAddModal_wrapper__Qqnkr",panel:"QuickAddModal_panel__O6HKG",header:"QuickAddModal_header__ZZNa8",headerIcon:"QuickAddModal_headerIcon__3ZBJd",title:"QuickAddModal_title__FaFVs",subtitle:"QuickAddModal_subtitle__imxIX",closeButton:"QuickAddModal_closeButton__2YE5n",actionList:"QuickAddModal_actionList__U2NQ8",actionButton:"QuickAddModal_actionButton__des1N",actionIcon:"QuickAddModal_actionIcon__Ql3Ox",actionMeta:"QuickAddModal_actionMeta__GaJDE",actionLabel:"QuickAddModal_actionLabel__yLK58",actionDescription:"QuickAddModal_actionDescription__sjwpc",trigger:"QuickAddModal_trigger__TuxpH",triggerIcon:"QuickAddModal_triggerIcon__EZTuK",triggerLabel:"QuickAddModal_triggerLabel__cI5k2",backdropEnter:"QuickAddModal_backdropEnter__6DJFz",backdropEnterFrom:"QuickAddModal_backdropEnterFrom__CmPT5",backdropEnterTo:"QuickAddModal_backdropEnterTo__AccZ_",backdropLeave:"QuickAddModal_backdropLeave__CBheK",backdropLeaveFrom:"QuickAddModal_backdropLeaveFrom__bq0U7",backdropLeaveTo:"QuickAddModal_backdropLeaveTo__ZeaA4",panelEnter:"QuickAddModal_panelEnter__77MCJ",panelEnterFrom:"QuickAddModal_panelEnterFrom__Aj3oQ",panelEnterTo:"QuickAddModal_panelEnterTo__I4Upx",panelLeave:"QuickAddModal_panelLeave__Khhe3",panelLeaveFrom:"QuickAddModal_panelLeaveFrom__DDfJo",panelLeaveTo:"QuickAddModal_panelLeaveTo__x0lMl"}},2243:e=>{e.exports={tooltip:"Tooltip_tooltip__awbme"}},2268:e=>{e.exports={screen:"TransactionsHistory_screen__baLUC",controlsRegion:"TransactionsHistory_controlsRegion__WqApA",topBar:"TransactionsHistory_topBar__KQy5q",searchContainer:"TransactionsHistory_searchContainer__Y_k10",searchIcon:"TransactionsHistory_searchIcon__oaEaz",searchInput:"TransactionsHistory_searchInput__tg7lr",searchClearButton:"TransactionsHistory_searchClearButton__dggnO",filterActions:"TransactionsHistory_filterActions___3XMN",filterActionsQuickAdd:"TransactionsHistory_filterActionsQuickAdd__mf0Tm",selectionToolbar:"TransactionsHistory_selectionToolbar__0gycv",selectionCount:"TransactionsHistory_selectionCount___Jqij",selectionActions:"TransactionsHistory_selectionActions__ILouT",selectionActionButton:"TransactionsHistory_selectionActionButton__Irs_E",toolbarCard:"TransactionsHistory_toolbarCard__Ft5nj",toolbarLeft:"TransactionsHistory_toolbarLeft__ty8Ki",searchGroup:"TransactionsHistory_searchGroup__ogjGU",searchSubmitButton:"TransactionsHistory_searchSubmitButton__YwRyr",searchSubmitIcon:"TransactionsHistory_searchSubmitIcon__je9zS",searchSubmitText:"TransactionsHistory_searchSubmitText__7RsHp",addButtonText:"TransactionsHistory_addButtonText__UGmZo",customizeButtonText:"TransactionsHistory_customizeButtonText__76rpU",resetButtonText:"TransactionsHistory_resetButtonText__wXBph",searchInputActions:"TransactionsHistory_searchInputActions__T7eFK",searchIconButton:"TransactionsHistory_searchIconButton__o2fMa",searchRestoreButton:"TransactionsHistory_searchRestoreButton__WTPZP",iconButton:"TransactionsHistory_iconButton__P_KIS",toolbarIconButton:"TransactionsHistory_toolbarIconButton__Eav1O",restoreChip:"TransactionsHistory_restoreChip__wxZP0",filterButton:"TransactionsHistory_filterButton__eWuDI",filterButtonActive:"TransactionsHistory_filterButtonActive__JRdIW",countBadge:"TransactionsHistory_countBadge__lDCsH",primaryButton:"TransactionsHistory_primaryButton__6QKyL",iconPrimaryButton:"TransactionsHistory_iconPrimaryButton__CDtGL",srOnly:"TransactionsHistory_srOnly__2LGzz",customizeRow:"TransactionsHistory_customizeRow__UvjZJ",customizeCell:"TransactionsHistory_customizeCell__cypGw",customizeControls:"TransactionsHistory_customizeControls__3KAsv",customizeToolbarRow:"TransactionsHistory_customizeToolbarRow__DjT2x",customizeSelectAll:"TransactionsHistory_customizeSelectAll__NGiMa",customizeToolbarActions:"TransactionsHistory_customizeToolbarActions__PwR0q",customizeToggleGrid:"TransactionsHistory_customizeToggleGrid__70GsI",customizeToggleSpacer:"TransactionsHistory_customizeToggleSpacer__M2WnI",customizeToggle:"TransactionsHistory_customizeToggle__kbjMl",customizeToggleVisible:"TransactionsHistory_customizeToggleVisible__Zqo_v",customizeToggleHidden:"TransactionsHistory_customizeToggleHidden__wwSL3",customizeToggleLabel:"TransactionsHistory_customizeToggleLabel__JDU82",customizeToggleActions:"TransactionsHistory_customizeToggleActions__t_J1a",customizeNudgeButton:"TransactionsHistory_customizeNudgeButton__1O69A",actionsGroup:"TransactionsHistory_actionsGroup__5ePbZ",customizeActionsGroup:"TransactionsHistory_customizeActionsGroup__uYKD1",toolbarSearchRow:"TransactionsHistory_toolbarSearchRow__bEuT1",searchButtonGroup:"TransactionsHistory_searchButtonGroup__YDpao",toolbarCustomizeRow:"TransactionsHistory_toolbarCustomizeRow__YNz3r",customizeActionsCluster:"TransactionsHistory_customizeActionsCluster__J51Kt",toggleSwitch:"TransactionsHistory_toggleSwitch__EmQEn",toggleVisual:"TransactionsHistory_toggleVisual__W1TvD",toggleLabel:"TransactionsHistory_toggleLabel__McI_g",toolbarCustomizeControls:"TransactionsHistory_toolbarCustomizeControls__twujA",tableActionsGroup:"TransactionsHistory_tableActionsGroup__JDF_9",actionsEllipsis:"TransactionsHistory_actionsEllipsis__yshrx",tableActionIconButton:"TransactionsHistory_tableActionIconButton__QOwXs",tableDangerIconButton:"TransactionsHistory_tableDangerIconButton__rfksJ",advancedButton:"TransactionsHistory_advancedButton__ZJdxz",pageSizeGroup:"TransactionsHistory_pageSizeGroup__fyr3G",pageSizeSelect:"TransactionsHistory_pageSizeSelect__YmWRs",fontScaleGroup:"TransactionsHistory_fontScaleGroup___TT6Q",fontScaleLabel:"TransactionsHistory_fontScaleLabel__NoTE0",fontScaleButton:"TransactionsHistory_fontScaleButton__TXs3I",fontScaleButtonText:"TransactionsHistory_fontScaleButtonText__uJCcc",fontScaleValue:"TransactionsHistory_fontScaleValue__eOzU4",fontScaleReset:"TransactionsHistory_fontScaleReset__Ng6Rz",paginationControls:"TransactionsHistory_paginationControls__Loigg",paginationMeta:"TransactionsHistory_paginationMeta__bnI7O",fontScaleMeta:"TransactionsHistory_fontScaleMeta__siKyk",paginationButton:"TransactionsHistory_paginationButton__ABbUY",paginationButtonText:"TransactionsHistory_paginationButtonText__WxCg2",paginationStatus:"TransactionsHistory_paginationStatus__BtArC",tableFooter:"TransactionsHistory_tableFooter__xQ3P1",selectionBar:"TransactionsHistory_selectionBar__JP2ln",selectionSummaryText:"TransactionsHistory_selectionSummaryText___H3ox",selectionTotals:"TransactionsHistory_selectionTotals__2DOAp",selectionButtons:"TransactionsHistory_selectionButtons__JNS6j",modalOverlay:"TransactionsHistory_modalOverlay__cmTB_",modalContent:"TransactionsHistory_modalContent__xrbyn",fadeUp:"TransactionsHistory_fadeUp__9zLvh",modalHeader:"TransactionsHistory_modalHeader__uxnGT",modalTitle:"TransactionsHistory_modalTitle__rK37w",modalBody:"TransactionsHistory_modalBody__vyhTF",modalDescription:"TransactionsHistory_modalDescription__LQXPu",columnsOverlay:"TransactionsHistory_columnsOverlay__slHKc",columnsPopover:"TransactionsHistory_columnsPopover__iFim2",columnsHeader:"TransactionsHistory_columnsHeader__fG_W4",columnsSearchRow:"TransactionsHistory_columnsSearchRow__gTyn5",columnsSearchField:"TransactionsHistory_columnsSearchField__RMr3H",columnsSearchIcon:"TransactionsHistory_columnsSearchIcon___RiOR",columnsSearchInput:"TransactionsHistory_columnsSearchInput__uv3h6",columnsListWrap:"TransactionsHistory_columnsListWrap__nAyJV",columnsList:"TransactionsHistory_columnsList__ff7G4",dropIndicatorPulse:"TransactionsHistory_dropIndicatorPulse__qDfy9",columnRow:"TransactionsHistory_columnRow__AvJmp",columnRowDragging:"TransactionsHistory_columnRowDragging__Hrkv8",columnRowPreview:"TransactionsHistory_columnRowPreview__ZBjll",columnDragHandle:"TransactionsHistory_columnDragHandle__PfkCw",columnMainControls:"TransactionsHistory_columnMainControls__we_bb",columnLabel:"TransactionsHistory_columnLabel__CLYE5",columnCheckbox:"TransactionsHistory_columnCheckbox__jQx1_",columnFormatGroup:"TransactionsHistory_columnFormatGroup__eR5Db",columnFormatControl:"TransactionsHistory_columnFormatControl__eHbvP",columnFormatLabel:"TransactionsHistory_columnFormatLabel__p9GsN",columnFormatSelect:"TransactionsHistory_columnFormatSelect__9_jnB",columnFormatInput:"TransactionsHistory_columnFormatInput__G_1vE",columnWidthGroup:"TransactionsHistory_columnWidthGroup__ejlmA",columnWidthValue:"TransactionsHistory_columnWidthValue__IZSsM",columnWidthSlider:"TransactionsHistory_columnWidthSlider__JmvQy",columnsFooter:"TransactionsHistory_columnsFooter__sJVb1",modalField:"TransactionsHistory_modalField__ShItI",modalDropdown:"TransactionsHistory_modalDropdown__YwpLf",modalDropdownTrigger:"TransactionsHistory_modalDropdownTrigger__HmBOV",modalDropdownLabelGroup:"TransactionsHistory_modalDropdownLabelGroup__uOY4I",modalDropdownValue:"TransactionsHistory_modalDropdownValue__Hvjff",modalDropdownChevron:"TransactionsHistory_modalDropdownChevron__ktMI6",modalDropdownContent:"TransactionsHistory_modalDropdownContent__7TY0i",modalSimpleList:"TransactionsHistory_modalSimpleList__QwBy5",modalSearchGroup:"TransactionsHistory_modalSearchGroup__WHH0P",modalPicker:"TransactionsHistory_modalPicker__2x1Rx",modalPickerSearch:"TransactionsHistory_modalPickerSearch__628_O",modalOptionList:"TransactionsHistory_modalOptionList__N7G63",modalOptionButton:"TransactionsHistory_modalOptionButton__8_6oX",modalOptionButtonActive:"TransactionsHistory_modalOptionButtonActive__Pdul2",modalSearchIcon:"TransactionsHistory_modalSearchIcon__sDdQ0",modalSearchInput:"TransactionsHistory_modalSearchInput__4Epk_",modalLabel:"TransactionsHistory_modalLabel__Pg2dM",modalControl:"TransactionsHistory_modalControl__ir_BR",tagList:"TransactionsHistory_tagList__FeMQa",tagOption:"TransactionsHistory_tagOption__4t7r0",tagOptionActive:"TransactionsHistory_tagOptionActive__Ojl32",emptyOption:"TransactionsHistory_emptyOption__8gygI",modalFooter:"TransactionsHistory_modalFooter__s5ZVp",secondaryButton:"TransactionsHistory_secondaryButton__OMUuB",clearFilterButton:"TransactionsHistory_clearFilterButton__6BsT0",modalApply:"TransactionsHistory_modalApply__MBFH3",advancedOverlay:"TransactionsHistory_advancedOverlay__ejxR1",advancedPanel:"TransactionsHistory_advancedPanel__RtNEG",advancedTextarea:"TransactionsHistory_advancedTextarea__Pzj1Q",advancedError:"TransactionsHistory_advancedError__DONGF",advancedHeader:"TransactionsHistory_advancedHeader__RhcSZ",advancedTitle:"TransactionsHistory_advancedTitle__AAPor",advancedSection:"TransactionsHistory_advancedSection__AT8Ld",advancedLabel:"TransactionsHistory_advancedLabel__qJtLn",advancedValue:"TransactionsHistory_advancedValue__M2hqq",metricsGrid:"TransactionsHistory_metricsGrid__ivkW8",metricTile:"TransactionsHistory_metricTile__5Z5d_",metricLabel:"TransactionsHistory_metricLabel__36_0R",metricValue:"TransactionsHistory_metricValue__HdfDG",wrap:"TransactionsHistory_wrap__UkB8s",confirmOverlay:"TransactionsHistory_confirmOverlay__iL8QE",confirmDialog:"TransactionsHistory_confirmDialog__NIcwq",confirmMessage:"TransactionsHistory_confirmMessage__QmYWw",confirmActions:"TransactionsHistory_confirmActions__oictr",triggerIcon:"TransactionsHistory_triggerIcon__IHm3Q",paginationBar:"TransactionsHistory_paginationBar__KvcY_",selectionQuickActions:"TransactionsHistory_selectionQuickActions__Aee4e"}},4984:(e,t,a)=>{"use strict";a.d(t,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var n=a(997),o=a(6689),l=a(3692),r=a(4573),s=a(3789),i=a(5188),c=a.n(i);let d=(0,s.Gd)(),u=(0,s.JV)(),__WEBPACK_DEFAULT_EXPORT__=function({isOpen:e,onClose:t,onSubmit:a}){let[i,m]=(0,o.useState)(!1),[_,p]=(0,o.useState)(""),[h,b]=(0,o.useState)(d[0]?.value??"bank"),[f,g]=(0,o.useState)("0"),[y,T]=(0,o.useState)(s.GW.ACTIVE),[v,x]=(0,o.useState)(""),[C,N]=(0,o.useState)(!1),[k,B]=(0,o.useState)(!1);(0,o.useEffect)(()=>{e&&(m(!1),p(""),b(d[0]?.value??"bank"),g("0"),T(s.GW.ACTIVE),x(""),B(!1))},[e]),(0,o.useEffect)(()=>{if(!e||"undefined"==typeof document)return;let t=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=t}},[e]),(0,o.useEffect)(()=>{},[e]);let A=(0,o.useCallback)(()=>{k||B(!0)},[k]),j=(0,o.useCallback)(()=>{k?N(!0):t()},[k,t]),w=(0,o.useCallback)(()=>{N(!1),t()},[t]),S=(0,o.useCallback)(()=>{N(!1)},[]),handleSubmit=async e=>{if(e.preventDefault(),!i){if(!_.trim()){alert("Please enter an account name");return}try{m(!0);let e=parseFloat(f)||0,n={accountName:_.trim(),accountType:h,openingBalance:e,currentBalance:e,status:y,notes:v.trim()||void 0},o=await a(n);o&&t()}finally{m(!1)}}};return e?(0,n.jsxs)(n.Fragment,{children:[n.jsx("div",{className:c().overlay,role:"presentation",onClick:e=>e.target===e.currentTarget&&j(),children:(0,n.jsxs)("div",{className:c().dialog,role:"dialog","aria-modal":"true","aria-label":"Add new account",children:[(0,n.jsxs)("div",{className:c().header,children:[n.jsx("h2",{className:c().title,children:"+ Add Account"}),n.jsx("button",{type:"button",className:c().closeButton,onClick:j,"aria-label":"Close add account modal",children:n.jsx(l.q5L,{"aria-hidden":!0})})]}),(0,n.jsxs)("form",{className:c().content,onSubmit:handleSubmit,children:[(0,n.jsxs)("label",{className:c().field,htmlFor:"add-account-overlay-name",children:[n.jsx("span",{className:c().fieldLabel,children:"Account name *"}),n.jsx("input",{id:"add-account-overlay-name",className:c().input,value:_,onChange:e=>{p(e.target.value),A()},required:!0,placeholder:"e.g., Vietcombank Savings"})]}),(0,n.jsxs)("label",{className:c().field,htmlFor:"add-account-overlay-type",children:[n.jsx("span",{className:c().fieldLabel,children:"Account type *"}),n.jsx("select",{id:"add-account-overlay-type",className:c().input,value:h,onChange:e=>{b(e.target.value),A()},children:d.map(e=>n.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,n.jsxs)("label",{className:c().field,htmlFor:"add-account-overlay-balance",children:[n.jsx("span",{className:c().fieldLabel,children:"Opening balance *"}),n.jsx("input",{id:"add-account-overlay-balance",className:c().input,type:"number",min:"0",step:"0.01",value:f,onChange:e=>{g(e.target.value),A()},required:!0,placeholder:"0.00"})]}),(0,n.jsxs)("label",{className:c().field,htmlFor:"add-account-overlay-status",children:[n.jsx("span",{className:c().fieldLabel,children:"Status *"}),n.jsx("select",{id:"add-account-overlay-status",className:c().input,value:y,onChange:e=>{T(e.target.value),A()},children:u.map(e=>n.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,n.jsxs)("label",{className:c().field,htmlFor:"add-account-overlay-note",children:[n.jsx("span",{className:c().fieldLabel,children:"Notes"}),n.jsx("textarea",{id:"add-account-overlay-note",className:c().textarea,rows:3,value:v,onChange:e=>{x(e.target.value),A()},placeholder:"Optional notes about this account"})]}),(0,n.jsxs)("div",{className:c().footer,children:[n.jsx("button",{type:"button",className:c().secondaryButton,onClick:j,disabled:i,children:"Cancel"}),n.jsx("button",{type:"submit",className:c().primaryButton,disabled:i,children:i?"Saving…":"Save Account"})]})]})]})}),n.jsx(r.c,{isOpen:C,title:"Discard changes?",message:"You have unsaved changes. Are you sure you want to close this form?",confirmLabel:"Discard",cancelLabel:"Keep editing",onConfirm:w,onCancel:S})]}):null}},590:(e,t,a)=>{"use strict";a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var o=a(997),l=a(6689),r=a(3692),s=a(2348),i=a(1196),c=a(3789),d=a(2996),u=a.n(d),m=e([s]);s=(m.then?(await m)():m)[0];let _=(0,c.Gd)(),p=(0,c.JV)(),h=[{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"archived",label:"Archived"}],__WEBPACK_DEFAULT_EXPORT__=function({type:e,isOpen:t,onClose:a,onSubmit:n}){let{activePeople:c,isLoading:d}=(0,i.u)(),[m,b]=(0,l.useState)(!1),[f,g]=(0,l.useState)(""),[y,T]=(0,l.useState)(_[0]?.value??"bank"),[v,x]=(0,l.useState)(""),[C,N]=(0,l.useState)("0"),[k,B]=(0,l.useState)(p[0]?.value??"active"),[A,j]=(0,l.useState)(""),[w,S]=(0,l.useState)(""),[M,E]=(0,l.useState)(""),[H,F]=(0,l.useState)(h[0]?.value??"active");(0,l.useEffect)(()=>{"account"===e&&!v&&c.length>0&&x(c[0].personId)},[e,c,v]);let L=(0,l.useMemo)(()=>{switch(e){case"transaction":return"+ Add Transaction";case"person":return"+ Add Person";default:return"+ Add Account"}},[e]);if((0,l.useEffect)(()=>{if(!t){b(!1);return}b(!1),g(""),T(_[0]?.value??"bank"),x(c.length>0?c[0].personId:""),N("0"),B(p[0]?.value??"active"),j(""),S(""),E(""),F(h[0]?.value??"active")},[t,c]),(0,l.useEffect)(()=>{if(!t||"undefined"==typeof document)return;let e=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}},[t]),(0,l.useEffect)(()=>{if(!t||"transaction"===e)return},[t,e]),!t)return null;if("transaction"===e)return o.jsx(s.Z,{isOpen:t,onClose:a,onRequestClose:a,onSave:e=>{n?.("transaction",e)}});let handleSubmit=async t=>{if(t.preventDefault(),!m){if("account"===e&&!v){alert("Please select an account owner");return}try{if(b(!0),"account"===e){let e=parseFloat(C)||0,t={accountName:f.trim(),accountType:y,ownerId:v,openingBalance:e,currentBalance:e,status:k,notes:A.trim()};await n?.("account",t)}else if("person"===e){let e={fullName:w.trim(),contactInfo:M.trim(),status:H};await n?.("person",e)}a()}finally{b(!1)}}};return o.jsx("div",{className:u().overlay,role:"presentation",onClick:e=>e.target===e.currentTarget&&a(),children:(0,o.jsxs)("div",{className:u().dialog,role:"dialog","aria-modal":"true","aria-label":L,children:[(0,o.jsxs)("div",{className:u().header,children:[o.jsx("h2",{className:u().title,children:L}),o.jsx("button",{type:"button",className:u().closeButton,onClick:a,"aria-label":"Close add modal",children:o.jsx(r.q5L,{"aria-hidden":!0})})]}),(0,o.jsxs)("form",{className:u().content,onSubmit:handleSubmit,children:["account"===e?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("label",{className:u().field,htmlFor:"add-modal-field-accountName",children:[o.jsx("span",{className:u().fieldLabel,children:"Account name"}),o.jsx("input",{id:"add-modal-field-accountName",className:u().input,value:f,onChange:e=>g(e.target.value),required:!0,placeholder:"e.g., Vietcombank Savings"})]}),(0,o.jsxs)("label",{className:u().field,htmlFor:"add-modal-field-accountType",children:[o.jsx("span",{className:u().fieldLabel,children:"Account type"}),o.jsx("select",{id:"add-modal-field-accountType",className:u().input,value:y,onChange:e=>T(e.target.value),children:_.map(e=>o.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,o.jsxs)("label",{className:u().field,htmlFor:"add-modal-field-ownerId",children:[o.jsx("span",{className:u().fieldLabel,children:"Owner"}),o.jsx("select",{id:"add-modal-field-ownerId",className:u().input,value:v,onChange:e=>x(e.target.value),required:!0,disabled:d||0===c.length,children:0===c.length?o.jsx("option",{value:"",children:"No active people available"}):c.map(e=>o.jsx("option",{value:e.personId,children:e.fullName},e.personId))})]}),(0,o.jsxs)("label",{className:u().field,htmlFor:"add-modal-field-openingBalance",children:[o.jsx("span",{className:u().fieldLabel,children:"Opening balance"}),o.jsx("input",{id:"add-modal-field-openingBalance",className:u().input,type:"number",min:"0",step:"0.01",value:C,onChange:e=>N(e.target.value),required:!0,placeholder:"0.00"})]}),(0,o.jsxs)("label",{className:u().field,htmlFor:"add-modal-field-accountStatus",children:[o.jsx("span",{className:u().fieldLabel,children:"Status"}),o.jsx("select",{id:"add-modal-field-accountStatus",className:u().input,value:k,onChange:e=>B(e.target.value),children:p.map(e=>o.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,o.jsxs)("label",{className:u().field,htmlFor:"add-modal-field-accountNote",children:[o.jsx("span",{className:u().fieldLabel,children:"Notes"}),o.jsx("textarea",{id:"add-modal-field-accountNote",className:u().textarea,rows:3,value:A,onChange:e=>j(e.target.value),placeholder:"Optional notes about this account"})]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("label",{className:u().field,htmlFor:"add-modal-field-personName",children:[o.jsx("span",{className:u().fieldLabel,children:"Full name"}),o.jsx("input",{id:"add-modal-field-personName",className:u().input,value:w,onChange:e=>S(e.target.value),required:!0})]}),(0,o.jsxs)("label",{className:u().field,htmlFor:"add-modal-field-personEmail",children:[o.jsx("span",{className:u().fieldLabel,children:"Email (optional)"}),o.jsx("input",{id:"add-modal-field-personEmail",className:u().input,type:"email",value:M,onChange:e=>E(e.target.value),placeholder:"name@example.com"})]}),(0,o.jsxs)("label",{className:u().field,htmlFor:"add-modal-field-personStatus",children:[o.jsx("span",{className:u().fieldLabel,children:"Status"}),o.jsx("select",{id:"add-modal-field-personStatus",className:u().input,value:H,onChange:e=>F(e.target.value),children:h.map(e=>o.jsx("option",{value:e.value,children:e.label},e.value))})]})]}),(0,o.jsxs)("div",{className:u().footer,children:[o.jsx("button",{type:"button",className:u().secondaryButton,onClick:a,disabled:m,children:"Cancel"}),o.jsx("button",{type:"submit",className:u().primaryButton,disabled:m,children:m?"Saving…":"Save"})]})]})]})})};n()}catch(e){n(e)}})},6327:(e,t,a)=>{"use strict";a.a(e,async(e,n)=>{try{a.d(t,{ZP:()=>AmountInput});var o=a(997),l=a(6689),r=a(2246),s=a(6233),i=a.n(s),c=e([r]);r=(c.then?(await c)():c)[0];let d=/[^0-9.]/g,u=/^0+(?=\d)/,m=/\B(?=(\d{3})+(?!\d))/g,_=[1e3,1e4,1e5],p=new Set(["+","-","*","/"]),h=new Set(["(",")"]),sanitizeExpressionInput=e=>e?e.replace(/\s+/g,"").replace(/,/g,"").replace(/[^0-9.+\-*/()]/g,""):"",tokenizeExpression=e=>{if(!e)return[];let t=sanitizeExpressionInput(e),a=[],n="";for(let e=0;e<t.length;e+=1){let o=t[e];if(h.has(o)){n&&(a.push({type:"number",value:n}),n=""),a.push({type:"paren",value:o});continue}if(!p.has(o)){n+=o;continue}let l=a[a.length-1],r=!l||"operator"===l.type||"paren"===l.type&&"("===l.value,s="-"===o&&""===n&&r;if(s){n+=o;continue}n&&(a.push({type:"number",value:n}),n=""),a.push({type:"operator",value:o})}return n&&a.push({type:"number",value:n}),a},tokenHasDigits=e=>"number"===e.type&&/\d/.test(e.value),shouldTreatTokensAsExpression=e=>{if(!e||0===e.length)return!1;let t=e.some(tokenHasDigits);if(!t)return!1;let a=e.some(e=>"operator"===e.type);if(a)return!0;let n=e.some(e=>"paren"===e.type);return!!n&&e.length>1},formatExpressionTokens=e=>e.map(e=>{if("number"===e.type){let t=formatDisplayValue(e.value);return{...e,display:t||e.value}}return{...e,display:e.value}}),joinTokensForInput=e=>e.map(e=>e.display).join(""),joinTokensForHistory=e=>e.map(e=>"operator"===e.type?` ${e.display} `:e.display).join("").replace(/\s+/g," ").trim(),parseInputValue=e=>{if(null==e)return"";let t=String(e);if(!t.trim())return"";let a=t.trim(),n=a.startsWith("-"),o=a.replace(/,/g,""),l=o.includes("."),r=o.replace(d,"");if(!r)return"";let[s="",...i]=r.split("."),c=i.join(""),m=s.replace(u,""),_=m||(s?"0":""),p=l&&(c.length>0||i.length>0);if(!_&&!c&&!p)return"";let h=c?`.${c}`:p?".":"";return`${n&&(_||c||p)?"-":""}${_||"0"}${h}`},formatDisplayValue=e=>{if(null==e)return"";let t=String(e);if(!t.trim())return"";let a=parseInputValue(t);if(!a)return"";let n=a.startsWith("-"),o=n?a.slice(1):a,[l="0",r=""]=o.split("."),s=(l||"0").replace(m,","),i=o.endsWith(".")&&!r,c=r?`.${r}`:i?".":"";return`${n?"-":""}${s}${c}`},generateSuggestions=e=>{let t=parseInputValue(e);if(!t||t.includes(".")||t.startsWith("-")||!/^\d+$/.test(t))return[];let a=Number.parseInt(t,10);if(!Number.isFinite(a)||0===a)return[];let n=new Set,o=[];for(let e of _){let l=a*e;if(!Number.isFinite(l)||l<=0)continue;let r=String(Math.trunc(l));n.has(r)||r===t||(n.add(r),o.push({raw:r,formatted:formatDisplayValue(r)}))}return o.slice(0,3)};function AmountInput({value:e,onChange:t,onFocus:a,onBlur:n,onHistoryChange:s,onKeyDown:c,placeholder:d="",id:u,label:m,className:_="",inputMode:p="decimal",wrapperClassName:h="",labelClassName:b="",name:f,...g}){let y=(0,l.useMemo)(()=>parseInputValue(e),[e]),T=(0,l.useMemo)(()=>formatDisplayValue(y),[y]),[v,x]=(0,l.useState)(T),[C,N]=(0,l.useState)(""),[k,B]=(0,l.useState)(""),[A,j]=(0,l.useState)(""),[w,S]=(0,l.useState)([]),[M,E]=(0,l.useState)(!1),[H,F]=(0,l.useState)(""),L=C.length>0,D=(0,l.useRef)(null),I=(0,l.useRef)(null),R=(0,l.useRef)(null),$=(0,l.useRef)(!1),O=(0,l.useMemo)(()=>L?[]:generateSuggestions(y),[L,y]);(0,l.useEffect)(()=>{L||x(T)},[T,L]),(0,l.useEffect)(()=>{if(L){S([]),E(!1);return}S(O),0===O.length&&E(!1)},[O,L]),(0,l.useEffect)(()=>()=>{R.current&&clearTimeout(R.current)},[]),(0,l.useEffect)(()=>{s?.(A)},[A,s]),(0,l.useEffect)(()=>{y||L||j(e=>e?"":e)},[L,y]);let z=(0,l.useCallback)(e=>{if(R.current&&(clearTimeout(R.current),R.current=null),$.current){$.current=!1;return}!L&&w.length>0&&E(!0),a?.(e)},[L,a,w.length]),P=(0,l.useCallback)(e=>{R.current&&clearTimeout(R.current),R.current=setTimeout(()=>{let e=document.activeElement;I.current?.contains(e)||E(!1)},120),n?.(e)},[n]),G=(0,l.useCallback)(e=>{if(!e)return;R.current&&(clearTimeout(R.current),R.current=null);let a=e.raw;t?.(a),N(""),B(""),j(""),x(formatDisplayValue(a)),E(!1),$.current=!0,requestAnimationFrame(()=>{D.current?.focus()})},[t]),W=(0,l.useCallback)(e=>{let a=!1;if("Enter"===e.key){let n=C.trim();if(n&&L){let o=tokenizeExpression(n),l=shouldTreatTokensAsExpression(o);if(l){e.preventDefault(),a=!0;let o=(0,r.eZ)(n);if(!o){F("Lỗi: Ph\xe9p t\xednh kh\xf4ng hợp lệ");return}if((0,r.S7)(o)){F("Lỗi: Kh\xf4ng thể chia cho 0");return}let l=(0,r.L$)(o);if(null===l){F("Lỗi: Ph\xe9p t\xednh kh\xf4ng hợp lệ");return}if("number"==typeof l&&l<0){F("Kết quả kh\xf4ng được \xe2m");return}let s=formatExpressionTokens(tokenizeExpression(o)),i=joinTokensForHistory(s),c=parseInputValue(String(l)),d=formatDisplayValue(c),u=i?`${i} = ${d}`:d?`= ${d}`:"";if(F(""),j(u),N(""),B(""),E(!1),x(d),t?.(c),c){let e=generateSuggestions(c);S(e)}else S([])}}}c&&c(e),a&&($.current=!0)},[C,L,t,c]),V=[i().container,h].filter(Boolean).join(" "),Z=[i().label,b].filter(Boolean).join(" "),Q=[i().input,_].filter(Boolean).join(" ");return(0,o.jsxs)("div",{className:V,children:[m?o.jsx("label",{className:Z,htmlFor:u,children:m}):null,o.jsx("input",{id:u,name:f,type:"text",inputMode:p,className:Q,value:L?k:v,onChange:e=>{H&&F("");let a=e.target.value,n=sanitizeExpressionInput(a),o=tokenizeExpression(n),l=shouldTreatTokensAsExpression(o);if(l){let e=o.map(e=>e.value).join("");N(e);let a=formatExpressionTokens(o);B(joinTokensForInput(a)),A&&j(""),t?.(""),E(!1),S([]);return}C&&(N(""),B(""));let r=parseInputValue(a);A&&j(""),t?.(r);let s=formatDisplayValue(r);x(s);let i=generateSuggestions(r);S(i),E(i.length>0)},onFocus:z,onBlur:P,onKeyDown:W,ref:D,placeholder:d,...g}),H?o.jsx("p",{className:i().inputErrorText,children:H}):null,M&&!L&&w.length>0?o.jsx("div",{className:i().suggestionsContainer,ref:I,children:w.map(e=>o.jsx("button",{type:"button",className:i().suggestionButton,onClick:()=>G(e),onMouseDown:e=>e.preventDefault(),tabIndex:-1,children:e.formatted},e.raw))}):null]})}n()}catch(e){n(e)}})},4573:(e,t,a)=>{"use strict";a.d(t,{c:()=>ConfirmationModal});var n=a(997),o=a(6405),l=a(6689),r=a(2341),s=a.n(r);function ConfirmationModal({isOpen:e,title:t,message:a,confirmLabel:r="Confirm",cancelLabel:i="Cancel",onConfirm:c,onCancel:d,confirmTone:u="primary"}){let m=(0,l.useRef)(null),_=(0,l.useRef)(null),p=(0,l.useRef)(null),h=(0,l.useMemo)(()=>`confirmation-modal-title-${Math.random().toString(36).slice(2)}`,[]),b=(0,l.useMemo)(()=>`confirmation-modal-message-${Math.random().toString(36).slice(2)}`,[]);if((0,l.useEffect)(()=>{if(!e||"undefined"==typeof document)return;p.current=document.activeElement;let t="danger"===u?_.current:m.current;(t??_.current??m.current)?.focus({preventScroll:!0});let handleKeyDown=e=>{if("Escape"===e.key){e.preventDefault(),d?.();return}if("Tab"===e.key){let t=[m.current,_.current].filter(Boolean);if(t.length<=1)return;let a=t[0],n=t[t.length-1],o=document.activeElement;e.shiftKey?o!==a&&t.includes(o)||(e.preventDefault(),n.focus()):o===n&&(e.preventDefault(),a.focus())}};return document.addEventListener("keydown",handleKeyDown),()=>{document.removeEventListener("keydown",handleKeyDown);let e=p.current;e&&"function"==typeof e.focus&&e.focus({preventScroll:!0})}},[u,e,d]),"undefined"==typeof document||!e)return null;let f=[s().confirmButton];"danger"===u?f.push(s().confirmButtonDanger):f.push(s().confirmButtonPrimary);let g=t?h:void 0,y=a?b:void 0;return(0,o.createPortal)(n.jsx("div",{className:s().overlay,role:"presentation",onClick:e=>{e.target===e.currentTarget&&d?.()},children:(0,n.jsxs)("div",{className:s().modal,role:"dialog","aria-modal":"true","aria-labelledby":g,"aria-describedby":y,onClick:e=>e.stopPropagation(),children:[t?n.jsx("h2",{className:s().title,id:g,children:t}):null,a?n.jsx("p",{className:s().message,id:y,children:a}):null,(0,n.jsxs)("div",{className:s().actions,children:[n.jsx("button",{type:"button",className:s().cancelButton,onClick:d,ref:m,children:i}),n.jsx("button",{type:"button",className:f.join(" "),onClick:c,ref:_,children:r})]})]})}),document.body)}},1210:(e,t,a)=>{"use strict";a.d(t,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var n=a(997);a(6689);var o=a(3034),l=a.n(o);let __WEBPACK_DEFAULT_EXPORT__=function({message:e="Loading…",className:t}){let a=[l().container,t].filter(Boolean).join(" ");return(0,n.jsxs)("div",{className:a,role:"status","aria-live":"polite",children:[n.jsx("span",{className:l().spinner,"aria-hidden":!0}),e?n.jsx("span",{className:l().label,children:e}):null]})}},177:(e,t,a)=>{"use strict";a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var o=a(997),l=a(6689),r=a(1425),s=a(4879),i=a(6197),c=a(3692),d=a(1723),u=a.n(d),m=e([i]);i=(m.then?(await m)():m)[0];let _={transactions:[{id:"income",label:"Income",description:"Log incoming funds",icon:o.jsx(c.UJB,{"aria-hidden":!0})},{id:"expense",label:"Expense",description:"Track outgoing spend",icon:o.jsx(c.OeJ,{"aria-hidden":!0})},{id:"transfer",label:"Transfer",description:"Move money between accounts",icon:o.jsx(c.yG,{"aria-hidden":!0})},{id:"refund",label:"Refund",description:"Credit back a transaction",icon:o.jsx(c.Bw1,{"aria-hidden":!0})}],accounts:[{id:"cashAccount",label:"Cash Wallet",description:"Create a cash account",icon:o.jsx(c.ggF,{"aria-hidden":!0})},{id:"bankAccount",label:"Bank Account",description:"Connect or add bank ledger",icon:o.jsx(c.QqI,{"aria-hidden":!0})},{id:"creditLine",label:"Credit Line",description:"Add a credit or charge card",icon:o.jsx(c.XiQ,{"aria-hidden":!0})},{id:"loanAccount",label:"Loan",description:"Track a loan or liability",icon:o.jsx(c.yG,{"aria-hidden":!0})}]},__WEBPACK_DEFAULT_EXPORT__=function({context:e,onSelect:t,className:a,disabled:n=!1,triggerLabel:d="Quick add",triggerAriaLabel:m}){let p=(0,l.useRef)(null),[h,b]=(0,l.useState)(!1),[f,g]=(0,l.useState)(()=>!1),[y,T]=(0,l.useState)({}),[v,x]=(0,l.useState)(!1);(0,l.useEffect)(()=>{x(!0)},[]);let C=(0,l.useCallback)(()=>{let e=p.current;if(!e)return;let t=e.getBoundingClientRect(),a=Math.max(t.width,320),n=t.bottom+12,o=window.innerWidth,l=Math.min(Math.max(t.left,12),Math.max(o-a-12,12));T({"--qa-top":`${n}px`,"--qa-left":`${l}px`,"--qa-min-width":`${a}px`})},[]);(0,l.useEffect)(()=>{},[C]);let N=(0,l.useMemo)(()=>_[e]??[],[e]),closeModal=()=>{b(!1)};(0,l.useEffect)(()=>{if(!h||f)return;C();let handleScroll=()=>C();return window.addEventListener("scroll",handleScroll,!0),()=>window.removeEventListener("scroll",handleScroll,!0)},[h,f,C]);let handleSelect=a=>{t?.(e,a),closeModal()};return(0,o.jsxs)("div",{className:a,children:[(0,o.jsxs)("button",{ref:p,type:"button",className:u().trigger,disabled:n,onClick:()=>{!n&&(b(!0),f||C())},"aria-label":m??d,children:[o.jsx("span",{className:u().triggerIcon,"aria-hidden":!0,children:o.jsx(c.Wqx,{})}),o.jsx("span",{className:u().triggerLabel,children:d})]}),v?o.jsx(r.u,{show:h,as:l.Fragment,appear:!0,children:(0,o.jsxs)(s.V,{as:"div",className:u().root,onClose:closeModal,static:!0,children:[o.jsx(r.u.Child,{as:l.Fragment,enter:u().backdropEnter,enterFrom:u().backdropEnterFrom,enterTo:u().backdropEnterTo,leave:u().backdropLeave,leaveFrom:u().backdropLeaveFrom,leaveTo:u().backdropLeaveTo,children:o.jsx("div",{className:u().backdrop,"aria-hidden":!0})}),o.jsx("div",{className:u().wrapper,"data-mobile":f?"true":void 0,style:f?void 0:y,children:o.jsx(r.u.Child,{as:l.Fragment,enter:u().panelEnter,enterFrom:u().panelEnterFrom,enterTo:u().panelEnterTo,leave:u().panelLeave,leaveFrom:u().panelLeaveFrom,leaveTo:u().panelLeaveTo,children:(0,o.jsxs)(s.V.Panel,{className:u().panel,"data-mobile":f?"true":void 0,children:[(0,o.jsxs)("header",{className:u().header,children:[o.jsx("span",{className:u().headerIcon,"aria-hidden":!0,children:o.jsx(c.Wqx,{})}),(0,o.jsxs)("div",{children:[o.jsx(s.V.Title,{className:u().title,children:"Quick add"}),o.jsx("p",{className:u().subtitle,children:"Choose an action to jump straight into a new entry."})]}),o.jsx("button",{type:"button",onClick:closeModal,className:u().closeButton,"aria-label":"Close quick add",children:"\xd7"})]}),o.jsx(i.motion.ul,{className:u().actionList,initial:"hidden",animate:"visible",variants:{hidden:{},visible:{transition:{staggerChildren:.06,delayChildren:.05}}},children:o.jsx(i.AnimatePresence,{children:N.map(e=>o.jsx(i.motion.li,{variants:{hidden:{opacity:0,y:12},visible:{opacity:1,y:0}},exit:{opacity:0,y:-8},children:(0,o.jsxs)("button",{type:"button",className:u().actionButton,onClick:()=>handleSelect(e.id),children:[o.jsx("span",{className:u().actionIcon,children:e.icon}),(0,o.jsxs)("span",{className:u().actionMeta,children:[o.jsx("span",{className:u().actionLabel,children:e.label}),o.jsx("span",{className:u().actionDescription,children:e.description})]})]})},e.id))})})]})})})]})}):null]})};n()}catch(e){n(e)}})},3027:(e,t,a)=>{"use strict";a.d(t,{Z:()=>ReusableDropdown});var n=a(997),o=a(6689),l=a(6405),r=a(3692),s=a(8491),i=a.n(s);let normalizeOption=(e,t)=>{if("string"==typeof e||"number"==typeof e){let a=String(e);return{key:`${a}-${t}`,value:a,label:a,original:e}}if(e&&"object"==typeof e){let a=void 0!==e.value?e.value:void 0!==e.id?e.id:e.label??"",n=String(a??""),o=e.label??String(a??"");return{key:e.key??`${n}-${t}`,value:n,label:o,original:e}}return null};function ReusableDropdown({options:e=[],value:t,onChange:a,placeholder:s="Select an option",label:c,id:d,testIdPrefix:u,disabled:m=!1,className:_="",openOnMount:p=!1,onOpenChange:h,searchPlaceholder:b="Search...",onAddNew:f,addNewLabel:g="+ New",ariaLabel:y,hasError:T=!1}){let v=null==t?"":String(t),x=(0,o.useMemo)(()=>e.map((e,t)=>normalizeOption(e,t)).filter(Boolean),[e]),[C,N]=(0,o.useState)(!1),[k,B]=(0,o.useState)(""),A=(0,o.useRef)(null),j=(0,o.useRef)(null),w=(0,o.useRef)(null),[S,M]=(0,o.useState)(null),E=(0,o.useMemo)(()=>x.find(e=>e.value===v)??null,[x,v]),H=(0,o.useMemo)(()=>{if(!k)return x;let e=k.trim().toLowerCase();return x.filter(t=>t.label.toLowerCase().includes(e))},[x,k]),F=(0,o.useCallback)((e=!1)=>{N(!1),B(""),h?.(!1),M(null),e&&requestAnimationFrame(()=>{A.current?.focus()})},[h]),L=(0,o.useCallback)(()=>{},[C]);(0,o.useEffect)(()=>{p&&!m&&(N(!0),B(""),h?.(!0))},[p,m,h]),(0,o.useEffect)(()=>{if(!C)return;let handleClick=e=>{j.current?.contains(e.target)||A.current?.contains(e.target)||F()},handleKeyDown=e=>{"Escape"===e.key&&(e.preventDefault(),F(!0))};return document.addEventListener("mousedown",handleClick),document.addEventListener("keydown",handleKeyDown),()=>{document.removeEventListener("mousedown",handleClick),document.removeEventListener("keydown",handleKeyDown)}},[C,F]),(0,o.useEffect)(()=>{},[C,L]),(0,o.useEffect)(()=>{C&&requestAnimationFrame(()=>{w.current?.focus()})},[C]);let handleSelect=e=>{e&&(a?.(e.value,e.original??e),F())},D=(0,o.useCallback)(()=>{m||(f?.(),F())},[F,m,f]),I=d??`reusable-dropdown-${Math.random().toString(36).slice(2)}`,R=u?`${u}-trigger`:void 0,$=u?`${u}-search`:void 0;return(0,n.jsxs)("div",{className:`${i().dropdown} ${_}`,"data-disabled":m?"true":void 0,"data-error":T?"true":void 0,children:[c?n.jsx("label",{className:i().label,htmlFor:`${I}-search`,children:c}):null,(0,n.jsxs)("button",{type:"button",id:I,ref:A,className:i().trigger,onClick:()=>{m||N(e=>{let t=!e;return t&&B(""),h?.(t),t})},disabled:m,"aria-haspopup":"listbox","aria-expanded":C,"aria-label":y??(c?void 0:s),"data-placeholder":E?"false":"true","data-testid":R,children:[n.jsx("span",{className:i().triggerText,children:E?E.label:s}),(0,n.jsxs)("span",{className:i().triggerIcons,children:[E?n.jsx("button",{type:"button",className:i().clearButton,onClick:e=>{e.stopPropagation(),m||(a?.("",null),F())},"aria-label":"Clear selection","data-testid":u?`${u}-clear`:void 0,children:n.jsx(r.q5L,{"aria-hidden":!0})}):null,n.jsx(r.bTu,{"aria-hidden":!0,className:i().chevronIcon})]})]}),C&&"undefined"!=typeof document?(0,l.createPortal)((0,n.jsxs)("div",{className:i().menu,ref:j,role:"listbox",style:{top:S?`${S.top}px`:"0px",left:S?`${S.left}px`:"0px",width:S?`${S.width}px`:void 0,visibility:S?"visible":"hidden"},children:[n.jsx("div",{className:i().searchWrapper,children:n.jsx("input",{ref:w,id:`${I}-search`,type:"search",value:k,onChange:e=>B(e.target.value),placeholder:b,className:i().searchInput,"data-testid":$})}),f?n.jsx("div",{className:i().menuNewAction,children:n.jsx("button",{type:"button",className:i().newButton,onClick:D,children:g})}):null,n.jsx("ul",{className:i().optionsList,children:0===H.length?n.jsx("li",{className:i().emptyState,children:"No matches found"}):H.map(e=>n.jsx("li",{children:n.jsx("button",{type:"button",className:i().optionButton,onClick:()=>handleSelect(e),"data-selected":e.value===v?"true":"false",role:"option","aria-selected":e.value===v,"data-testid":u?`${u}-option-${e.value}`:void 0,children:e.label})},e.key))})]}),document.body):null]})}},3735:(e,t,a)=>{"use strict";a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var o=a(997),l=a(6689),r=a(1425),s=a(4879),i=a(6197),c=a(3692),d=a(9893),u=a.n(d),m=e([i]);function normalizeColumns(e,t){return t.map(t=>{let a="accounts"===e&&"accountName"===t.id,n=!!(t.mandatory||a);return{...t,pinned:t.pinned??null,visible:!!n||!1!==t.visible,locked:t.locked||n,mandatory:n}})}i=(m.then?(await m)():m)[0];let __WEBPACK_DEFAULT_EXPORT__=function({context:e,open:t,columns:a,defaultColumns:n,onClose:d,onChange:m}){let[_,p]=(0,l.useState)(()=>normalizeColumns(e,a));(0,l.useEffect)(()=>{t&&p(normalizeColumns(e,a))},[t,a,e]);let h=(0,l.useMemo)(()=>"accounts"===e?"Customize account columns":"Customize transaction columns",[e]),emitChange=t=>{p(t),m(normalizeColumns(e,t))},handleToggleVisibility=e=>{let t=_.map(t=>t.id!==e||t.locked?t:{...t,visible:!t.visible});emitChange(t)};return o.jsx(r.u,{show:t,as:l.Fragment,appear:!0,children:(0,o.jsxs)(s.V,{as:"div",className:u().root,onClose:d,children:[o.jsx(r.u.Child,{as:l.Fragment,enter:u().backdropEnter,enterFrom:u().backdropEnterFrom,enterTo:u().backdropEnterTo,leave:u().backdropLeave,leaveFrom:u().backdropLeaveFrom,leaveTo:u().backdropLeaveTo,children:o.jsx("div",{className:u().backdrop,"aria-hidden":"true"})}),o.jsx("div",{className:u().wrapper,children:o.jsx(r.u.Child,{as:l.Fragment,enter:u().panelEnter,enterFrom:u().panelEnterFrom,enterTo:u().panelEnterTo,leave:u().panelLeave,leaveFrom:u().panelLeaveFrom,leaveTo:u().panelLeaveTo,children:(0,o.jsxs)(s.V.Panel,{className:u().panel,children:[(0,o.jsxs)("header",{className:u().header,children:[(0,o.jsxs)("div",{children:[o.jsx(s.V.Title,{className:u().title,children:h}),o.jsx("p",{className:u().subtitle,children:"Drag to reorder and toggle visibility. Mandatory columns stay visible."})]}),(0,o.jsxs)("div",{className:u().headerButtons,children:[o.jsx("button",{type:"button",onClick:()=>{let e=_.map(e=>e.locked?e:{...e,visible:!0});emitChange(e)},className:u().headerButton,children:"Show all"}),o.jsx("button",{type:"button",onClick:()=>{let t=normalizeColumns(e,n);emitChange(t)},className:u().headerButton,children:"Reset"}),o.jsx("button",{type:"button",onClick:d,className:u().closeButton,"aria-label":"Close customize modal",children:o.jsx(c.q5L,{"aria-hidden":!0})})]})]}),o.jsx(i.Reorder.Group,{axis:"y",values:_,onReorder:e=>{emitChange(e)},className:u().columnList,children:_.map(e=>(0,o.jsxs)(i.Reorder.Item,{value:e,className:u().columnItem,dragListener:!e.locked,"aria-disabled":e.locked?"true":void 0,children:[o.jsx("span",{className:u().columnDragHandle,"aria-hidden":!0,children:"⠿"}),(0,o.jsxs)("div",{className:u().columnChipBody,children:[(0,o.jsxs)("div",{className:u().columnMeta,children:[o.jsx("span",{className:u().columnLabel,children:e.label}),e.locked?o.jsx("span",{className:u().columnHint,children:"Locked"}):null]}),o.jsx("div",{className:u().columnControls,children:e.locked?(0,o.jsxs)("span",{className:u().lockBadge,children:[o.jsx(c.UIZ,{"aria-hidden":!0}),"Mandatory"]}):o.jsx("button",{type:"button",className:u().columnControlButton,onClick:()=>handleToggleVisibility(e.id),"aria-label":`${e.visible?"Hide":"Show"} ${e.label}`,children:e.visible?o.jsx(c.rDJ,{"aria-hidden":!0}):o.jsx(c.rzC,{"aria-hidden":!0})})})]})]},e.id))})]})})})]})})};n()}catch(e){n(e)}})},5832:(e,t,a)=>{"use strict";a.d(t,{W8:()=>x});var n=a(997),o=a(6689),l=a(4780),r=a.n(l),s=a(1210),i=a(7871);function normalizeNumericWidth(e){let t=Number(e);return Number.isFinite(t)&&t>0?t:null}function resolveColumnSizing(e,t){let a=normalizeNumericWidth(t?.minWidth)??120,n=normalizeNumericWidth(t?.defaultWidth)??a,o=normalizeNumericWidth(e?.width),l=Math.max(o??n,a);return{width:l,minWidth:l}}var c=a(3692),d=a(314),u=a.n(d),m=a(6405),_=a(2243),p=a.n(_);function Tooltip({content:e,children:t}){let a=(0,o.useRef)(null),[l,r]=(0,o.useState)(!1),[s,i]=(0,o.useState)({top:0,left:0});(0,o.useEffect)(()=>(r(!0),()=>r(!1)),[]);let c=(0,o.useCallback)(()=>{if(!a.current)return;let e=a.current.getBoundingClientRect(),t=e.top+window.scrollY,n=e.left+e.width/2+window.scrollX;i(e=>e.top===t&&e.left===n?e:{top:t,left:n})},[]),[d,u]=(0,o.useState)(!1);(0,o.useEffect)(()=>{if(!d)return;c();let handleScroll=()=>c();return window.addEventListener("scroll",handleScroll,!0),window.addEventListener("resize",handleScroll),()=>{window.removeEventListener("scroll",handleScroll,!0),window.removeEventListener("resize",handleScroll)}},[d,c]);let _=o.Children.only(t),h=_.ref,b={..._.props,ref:e=>{a.current=e,"function"==typeof h?h(e):h&&"object"==typeof h&&(h.current=e)},onMouseEnter:e=>{c(),u(!0),_.props.onMouseEnter&&_.props.onMouseEnter(e)},onMouseLeave:e=>{u(!1),_.props.onMouseLeave&&_.props.onMouseLeave(e)},onFocus:e=>{c(),u(!0),_.props.onFocus&&_.props.onFocus(e)},onBlur:e=>{u(!1),_.props.onBlur&&_.props.onBlur(e)}},f=l&&d?(0,m.createPortal)(n.jsx("div",{className:p().tooltip,role:"tooltip",style:{top:s.top,left:s.left},children:e}),document.body):null;return(0,n.jsxs)(n.Fragment,{children:[(0,o.cloneElement)(_,b),f]})}function SortGlyph({direction:e,isLoading:t}){return t?n.jsx("span",{className:u().sortSpinner,"aria-hidden":!0}):"asc"===e?n.jsx(c.rH8,{"aria-hidden":!0}):"desc"===e?n.jsx(c.bTu,{"aria-hidden":!0}):n.jsx(c.ego,{"aria-hidden":!0})}function TableBaseHeader({columns:e,visibleColumnIds:t=[],isColumnReorderMode:a=!1,activeDropTarget:l,onColumnDragStart:s,onColumnDragEnter:i,onColumnDragOver:d,onColumnDrop:m,onColumnDragEnd:_,allSelected:p=!1,isIndeterminate:h=!1,onSelectAll:b,headerCheckboxRef:f,onColumnVisibilityChange:g,sortState:y,onSortChange:T,isFetching:v=!1,transactions:x=[],pinnedLeftOffsets:C=new Map,pinnedRightOffsets:N=new Map}){let k=(0,o.useMemo)(()=>new Set(t),[t]),B=k.size,A=(0,o.useMemo)(()=>{if(!Array.isArray(x)||0===x.length)return new Set;let t=new Set;return e.forEach(e=>{if(!e?.id)return;let a=x.some(t=>{let a=function(e,t){if(!e||!t)return null;let{id:a}=t;if(!a)return null;let n=e[a];if(void 0!==n)return n;let o=t.definition?.valueKey;return o&&o in e?e[o]:null}(t,e);return function hasMeaningfulValue(e){if(null==e)return!1;if("number"==typeof e)return Math.abs(e)>0;if("string"==typeof e){let t=e.trim();if(!t)return!1;if(/^[-+]?[$€£¥]?\s*[\d.,]+%?$/.test(t)){let e=t.replace(/[$€£¥]/g,"").replace(/[,\s]/g,"").replace(/%$/,""),a=Number(e);if(Number.isFinite(a))return Math.abs(a)>0}return!0}return"boolean"==typeof e?!0===e:Array.isArray(e)?e.some(e=>hasMeaningfulValue(e)):"object"!=typeof e||Object.values(e).some(e=>hasMeaningfulValue(e))}(a)});a||t.add(e.id)}),t},[e,x]);return n.jsx("thead",{className:u().tableHeader,children:(0,n.jsxs)("tr",{children:[n.jsx("th",{scope:"col",className:`${u().headerCell} ${r().checkboxCell} ${r().stickyLeft}`,style:{minWidth:"48px",width:"48px"},children:n.jsx("div",{className:r().checkboxCellInner,children:n.jsx("div",{className:u().headerCheckboxInner,children:n.jsx("input",{ref:f,type:"checkbox","aria-label":"Select all rows","aria-checked":h?"mixed":p?"true":"false",checked:p,onChange:e=>b?.(e.target.checked),"data-testid":"transaction-select-all",disabled:a})})})}),e.map(e=>{let{id:t,column:o,definition:c,minWidth:p,width:h,align:b,pinned:f}=e,x=c?.label??o.id,j=!1===o.visible,w=a&&l===t,S=!1!==o.visible,M="notes"!==t,E=S&&B<=1&&k.has(t),H=M&&!E,F=y?.columnId===t&&y.direction,L=F?y.direction:null,D="task"===t,I=[u().headerCell,r().bodyCell,"right"===b?r().cellAlignRight:"center"===b?r().cellAlignCenter:"",a?u().headerReorder:"",w?u().headerDropTarget:"",j&&a?u().headerHidden:"",D?u().taskHeaderCell:"","left"===f?r().stickyLeft:"","right"===f?r().stickyRight:""].filter(Boolean).join(" "),R=A.has(t),$=R?`Sorting unavailable for ${x}`:F?"asc"===L?`Sorted ascending by ${x}`:`Sorted descending by ${x}`:`Sort by ${x}`,O=a?Math.max(p,160):p,z=a?Math.max(h,O):h,P=D?Math.max(O,80):O,G=[u().headerLabel,D?u().taskHeaderLabel:""].filter(Boolean).join(" "),W=[u().headerLabelText,D?u().taskHeaderText:""].filter(Boolean).join(" "),V=a?(0,n.jsxs)("label",{className:u().columnToggle,title:H?`Toggle ${x}`:"At least one column must stay visible","data-disabled":H?void 0:"true","data-align":"end",children:[n.jsx("input",{type:"checkbox",checked:S,onChange:e=>{if(!H){e.preventDefault();return}g?.(t,e.target.checked)},"aria-label":`Show or hide ${x} column`,"aria-disabled":H?void 0:"true","data-testid":`transactions-columns-toggle-${t}`}),n.jsx("span",{className:u().toggleTrack,children:n.jsx("span",{className:u().toggleThumb})})]}):null,Z=[u().headerShell,a?u().headerShellReorder:""].filter(Boolean).join(" "),Q="left"===f?{left:`${C.get(t)??0}px`}:"right"===f?{right:`${N.get(t)??0}px`}:{};return n.jsx("th",{scope:"col",className:I,style:{minWidth:`${P}px`,width:`${D?Math.max(z,P):z}px`,...Q},draggable:a&&S,onDragStart:a&&S&&s?s(t):void 0,onDragEnter:a&&i?i(t):void 0,onDragOver:a?d:void 0,onDragEnd:a?_:void 0,onDrop:a&&m?m(t):void 0,"aria-sort":F?"asc"===L?"ascending":"descending":"none",children:(0,n.jsxs)("div",{className:Z,children:[n.jsx("div",{className:u().headerContent,children:n.jsx("div",{className:G,children:n.jsx("span",{className:W,children:x})})}),a?V:n.jsx(Tooltip,{content:$,children:n.jsx("button",{type:"button",className:`${u().sortButton} ${F&&!R?u().sortButtonActive:""}`.trim(),onClick:()=>{a||T?.(t,"asc"===L?"desc":"desc"===L?null:"asc")},disabled:R,"aria-label":$,children:n.jsx(SortGlyph,{direction:(R?null:L)??void 0,isLoading:F&&v})})})]})},t)}),n.jsx("th",{scope:"col","aria-label":"Edit",className:`${u().headerCell} ${r().actionsCell} ${u().taskHeaderCell}`.trim(),style:{minWidth:"60px",width:"60px"},children:(0,n.jsxs)("div",{className:`${u().headerShell} ${u().taskHeaderShell}`.trim(),children:[n.jsx("span",{className:u().taskHeaderIcon,"aria-hidden":"true",children:n.jsx(c.IYd,{})}),n.jsx("span",{className:u().visuallyHidden,children:"Edit"})]})})]})})}var h=a(4061),b=a(7792),f=a.n(b);function TableTooltip({anchor:e,isVisible:t,children:a,className:l="table-tooltip",offset:r={x:0,y:0}}){let s=function(){let[e,t]=(0,o.useState)(!1);return(0,o.useEffect)(()=>(t(!0),()=>t(!1)),[]),e}(),i=(0,o.useMemo)(()=>{if(!e)return{top:0,left:0};let t=e.getBoundingClientRect(),a=window.scrollX,n=window.scrollY;return{top:t.top+n+(r.y??0),left:t.left+a+t.width/2+(r.x??0)}},[e,r.x,r.y]);return s&&t?(0,m.createPortal)(n.jsx("div",{className:l,style:{position:"absolute",top:i.top,left:i.left},role:"tooltip",children:a}),document.body):null}let g={"DD/MM":new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"2-digit"}),"DD/MM/YY":new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit"}),"MM/DD":new Intl.DateTimeFormat("en-US",{day:"2-digit",month:"2-digit"}),"MM/DD/YY":new Intl.DateTimeFormat("en-US",{day:"2-digit",month:"2-digit",year:"2-digit"})};function resolveTransactionType(e){let t=e?.typeValue??(0,h.MT)(e?.type),a=e?.typeLabel??(0,h.yl)(t);return{value:t,label:a}}function TotalBackCell({transaction:e}){let t=(0,i.dN)(e.totalBack),a=Number(e.percentBack??0),o=Number(e.fixedBack??0),l=Number(e.amount??0),r=a>0,s=o>0,c=Number(e.totalBack??0)>0&&r&&s&&l>0,d=`${(0,i.dN)(l)}\xd7${(0,i.T3)(a)} + ${(0,i.dN)(o)}`;return(0,n.jsxs)("div",{className:f().totalBackCell,"data-tooltip-text":c?d:void 0,children:[n.jsx("span",{className:f().totalBackValue,children:t}),c?n.jsx("span",{className:f().totalBackFormula,children:d}):null]})}let y={date:(e,t)=>(function(e,t="DD/MM"){if(!e)return"—";let a=new Date(`${e}T00:00:00`);if(Number.isNaN(a.getTime()))return e;if("DD/MM/YY"===t)return g["DD/MM"].format(a);if("MM/DD/YY"===t)return g["MM/DD"].format(a);if("YYYY-MM-DD"===t){let e=String(a.getMonth()+1).padStart(2,"0"),t=String(a.getDate()).padStart(2,"0");return`${a.getFullYear()}-${e}-${t}`}let n=g[t]??g["DD/MM"];return n.format(a)})(e.date,t.column.format),type:e=>{let{value:t,label:a}=resolveTransactionType(e);return n.jsx("span",{className:function(e){return e===h.A6.INCOME||e===h.A6.CASHBACK?`${f().pill} ${f().pillIncome}`.trim():e===h.A6.TRANSFER?`${f().pill} ${f().pillTransfer}`.trim():e===h.A6.EXPENSES||e===h.A6.DEBT?`${f().pill} ${f().pillExpense}`.trim():`${f().pill} ${f().pillNeutral}`.trim()}(t),children:a??"—"})},account:e=>e.account??"—",shop:e=>e.shop??"—",notes:e=>e.notes??"—",amount:e=>{let t=Math.abs(Number(e.amount??0)),{value:a}=resolveTransactionType(e);return n.jsx("span",{className:`${f().amountValue} ${function(e){return e===h.A6.INCOME||e===h.A6.CASHBACK?f().amountIncome:e===h.A6.TRANSFER?f().amountTransfer:f().amountExpense}(a)}`,"data-testid":`transaction-amount-${e.id}`,children:(0,i.dN)(t)})},percentBack:e=>(0,i.T3)(e.percentBack),fixedBack:e=>(0,i.dN)(e.fixedBack),totalBack:e=>n.jsx(TotalBackCell,{transaction:e}),finalPrice:e=>(0,i.dN)(e.finalPrice),debtTag:e=>e.debtTag??"—",cycleTag:e=>e.cycleTag??"—",category:e=>e.category??"—",linkedTxn:e=>e.linkedTxn??"—",owner:e=>e.owner??"—",id:e=>e.id??"—"};function TableBaseBody({transactions:e,columns:t,selectionSet:a,onSelectRow:l,hiddenColumnIds:s=new Set,isColumnReorderMode:i=!1,isShowingSelectedOnly:d=!1,getRowId:u=e=>e?e.id??null:null,renderRowActionsCell:m,onEditRow:_,pinnedLeftOffsets:p=new Map,pinnedRightOffsets:h=new Map}){let[b,g]=(0,o.useState)({anchor:null,content:"",isVisible:!1}),T=(0,o.useMemo)(()=>t.filter(e=>!1!==e.column.visible).length,[t]),v=(0,o.useCallback)(()=>{g(e=>e.isVisible?{anchor:null,content:"",isVisible:!1}:e)},[]),x=(0,o.useCallback)(e=>{if(!e)return{content:"",force:!1};let t=e.querySelector("[data-tooltip-text]"),a=t?.getAttribute("data-tooltip-text");if(a)return{content:a,force:!0};let n=e.textContent??"";return{content:n.trim(),force:!1}},[]),C=(0,o.useCallback)(e=>{if(!e){v();return}let{content:t,force:a}=x(e);if(!t){v();return}let n=e.scrollWidth-e.clientWidth>1;if(!a&&!n){v();return}g({anchor:e,content:t,isVisible:!0})},[v,x]),N=(0,o.useCallback)(e=>{C(e.currentTarget)},[C]),k=(0,o.useCallback)(()=>{v()},[v]),B=b.anchor,A=b.content,j=b.isVisible,renderDefaultRowActions=(e,t,a)=>{let o=a??e?.id,l=o?`Edit row ${o}`:"Edit row";return n.jsx("td",{className:`${r().bodyCell} ${r().actionsCell}`,style:{minWidth:"60px",width:"60px"},children:n.jsx("div",{className:f().inlineActions,"data-selected":t?"true":void 0,children:n.jsx("button",{type:"button",className:f().inlineEditButton,onClick:()=>_?.(e),disabled:i,title:"Edit","aria-label":l,"data-testid":o?`transaction-edit-${o}`:void 0,children:n.jsx(c.IYd,{"aria-hidden":!0})})})})};return(0,n.jsxs)(n.Fragment,{children:[n.jsx("tbody",{"data-testid":d?"transactions-body-selected":"transactions-body",children:0===e.length?n.jsx("tr",{children:n.jsx("td",{colSpan:T+2,className:f().emptyCell,"data-testid":"transactions-empty",children:"No data found"})}):e.map((e,o)=>{let c=u(e),d=c??e.id,b=d??`row-${o}`,g=null!=b&&a.has(b);return(0,n.jsxs)("tr",{className:`${f().row} ${g?f().rowSelected:""}`.trim(),children:[n.jsx("td",{className:`${r().bodyCell} ${r().checkboxCell} ${r().stickyLeft}`,style:{minWidth:"48px",width:"48px"},children:n.jsx("div",{className:r().checkboxCellInner,children:n.jsx("input",{type:"checkbox",checked:g,onChange:t=>{let a=d??e.id??`row-${o}`;null!=a&&l?.(a,t.target.checked)},"aria-label":`Select transaction ${d??e.id??`row-${o}`}`,disabled:i})})}),t.map(t=>{let{id:a,minWidth:l,width:c,align:u,pinned:m}=t,_=s.has(a),b="left"===m,f="right"===m,g=[r().bodyCell,"right"===u?r().cellAlignRight:"center"===u?r().cellAlignCenter:"",b?r().stickyLeft:"",f?r().stickyRight:"",_&&i?r().bodyCellHidden:""].filter(Boolean).join(" "),T=b?{left:`${p.get(a)??0}px`}:f?{right:`${h.get(a)??0}px`}:void 0;return n.jsx("td",{className:g,style:{minWidth:`${l}px`,width:`${c}px`,...T},"data-testid":`transactions-cell-${a}-${d??e.id??`row-${o}`}`,"aria-hidden":_&&i?"true":void 0,onMouseEnter:N,onMouseLeave:k,onFocus:N,onBlur:k,children:function(e,t){if(!e)return"--";let a=e.definition??{};if("function"==typeof a.renderCell)return a.renderCell(t,e);if("function"==typeof a.valueAccessor)return a.valueAccessor(t,e);if(a.valueKey&&t&&void 0!==t[a.valueKey])return t[a.valueKey];let n=y[e.id];return n?n(t,e):t&&void 0!==t[e.id]?t[e.id]:void 0!==a.emptyFallback?a.emptyFallback:"--"}(t,e)},a)}),m?m({transaction:e,isSelected:g,rowId:d,toggleSelection:t=>{let a=d??e.id??`row-${o}`;null!=a&&l?.(a,t)},onEdit:()=>_?.(e)}):renderDefaultRowActions(e,g,d)]},b)})}),n.jsx(TableTooltip,{anchor:B,isVisible:j,className:f().tooltipPortal,offset:{x:0,y:-8},children:A})]})}var T=a(4687),v=a.n(T);function MiniToolbar({selectedCount:e=0,onDelete:t,onCancel:a}){return 0===e?null:(0,n.jsxs)("div",{className:v().toolbar,"data-testid":"mini-toolbar",children:[(0,n.jsxs)("span",{className:v().count,"data-testid":"mini-toolbar-count",children:[e," selected"]}),(0,n.jsxs)("div",{className:v().actions,children:[t&&(0,n.jsxs)("button",{type:"button",className:v().actionButton,"data-action":"delete",onClick:t,"aria-label":`Delete ${e} selected item${1!==e?"s":""}`,children:[n.jsx(c.Ybf,{"aria-hidden":!0}),n.jsx("span",{children:"Delete"})]}),a&&(0,n.jsxs)("button",{type:"button",className:v().actionButton,"data-action":"cancel",onClick:a,"aria-label":"Clear selection",children:[n.jsx(c.q5L,{"aria-hidden":!0}),n.jsx("span",{children:"Cancel"})]})]})]})}let x=(0,o.forwardRef)(({tableScrollRef:e,transactions:t,selectedIds:a,onSelectRow:l,onSelectAll:c,selectionSummary:d=null,onOpenAdvanced:u,onBulkDelete:m,columnDefinitions:_=[],visibleColumns:p,pagination:h,toolbarSlot:b,tableTitle:f="Transactions history table",allColumns:g=[],isColumnReorderMode:y=!1,onColumnVisibilityChange:T,onColumnOrderChange:v,fontScale:x=1,sortState:C,onSortChange:N,isShowingSelectedOnly:k=!1,isFetching:B=!1,rowIdKey:A="id",rowIdAccessor:j,renderRowActionsCell:w,onEditRow:S},M)=>{let[E,H]=(0,o.useState)(null),F=(0,o.useRef)(null),L=(0,o.useRef)(null),D=(0,o.useRef)(null),I=(0,o.useRef)(null),R=function(...e){return(0,o.useCallback)(t=>{e.forEach(e=>{e&&("function"==typeof e?e(t):e.current=t)})},[e])}(D,e);(0,o.useImperativeHandle)(M,()=>D.current);let $=function(e=[]){return(0,o.useMemo)(()=>new Map(e.map(e=>[e.id,e])),[e])}(_),O=(0,o.useMemo)(()=>new Set(a),[a]),z=(0,o.useCallback)(e=>e?"function"==typeof j?j(e):A&&void 0!==e[A]?e[A]:e.id??null:null,[j,A]),P=t.length>0&&t.every(e=>O.has(z(e))),G=O.size>0&&!P,W=(0,o.useMemo)(()=>(function(e){let mapValue=e=>{if(null==e)return null;let t=Number(e);return Number.isFinite(t)?(0,i.Bo)(t):null};return{amount:mapValue(e?.amount),totalBack:mapValue(e?.totalBack),finalPrice:mapValue(e?.finalPrice),count:Number(e?.count??0)}})(d),[d]),V=O.size,Z=(0,o.useCallback)(()=>{if("function"==typeof m){m(Array.from(O));return}"function"==typeof u&&u({mode:"delete-many",ids:Array.from(O)})},[m,u,O]),Q=(0,o.useCallback)(()=>{c?.(!1)},[c]),K=(0,o.useMemo)(()=>y?g:p,[y,g,p]),U=(0,o.useMemo)(()=>new Set(g.filter(e=>!1===e.visible).map(e=>e.id)),[g]),q=(0,o.useMemo)(()=>K.map(e=>{let t=$.get(e.id),a=resolveColumnSizing(e,t),n=t?.align??"left";return{id:e.id,column:e,definition:t,minWidth:a.minWidth,width:a.width,align:n,pinned:e.pinned??null}}),[K,$]),J=(0,o.useMemo)(()=>{let e=48,t=new Map;return q.forEach(a=>{"left"===a.pinned&&(t.set(a.id,e),e+=a.width)}),t},[q]),Y=(0,o.useMemo)(()=>{let e=60,t=new Map;return[...q].reverse().forEach(a=>{"right"===a.pinned&&(t.set(a.id,e),e+=a.width)}),t},[q]),X=(0,o.useMemo)(()=>q.map(e=>e.id),[q]),ee=(0,o.useMemo)(()=>p.map(e=>e.id),[p]),et=(0,o.useMemo)(()=>{let e=function(e,t){return Array.isArray(e)&&0!==e.length?e.reduce((e,a)=>{let n=t.get(a.id),{minWidth:o}=resolveColumnSizing(a,n);return e+o},0):0}(K,$);return Math.max(e+48,0)},[K,$]);(0,o.useEffect)(()=>{F.current&&(F.current.indeterminate=G)},[G]),(0,o.useEffect)(()=>{y||(L.current=null,H(null))},[y]);let ea=(0,o.useCallback)(e=>t=>{if(y&&(L.current=e,H(e),t?.dataTransfer)){t.dataTransfer.effectAllowed="move";try{t.dataTransfer.setData("text/plain",e)}catch(e){}}},[y]),en=(0,o.useCallback)(e=>t=>{y&&null!==L.current&&(t?.preventDefault?.(),e!==E&&H(e))},[y,E]),eo=(0,o.useCallback)(e=>{y&&null!==L.current&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"))},[y]),el=(0,o.useCallback)(e=>t=>{if(!y)return;t.preventDefault();let a=L.current;if(L.current=null,H(null),!a||a===e)return;let n=X.indexOf(a),o=X.indexOf(e);if(-1===n||-1===o)return;let l=[...X];l.splice(n,1),l.splice(o,0,a),v?.(l)},[y,X,v]),er=(0,o.useCallback)(()=>{L.current=null,H(null)},[]),es=(0,o.useCallback)(e=>{if(e){if("function"==typeof S){S(e);return}u?.({mode:"edit",transaction:e})}},[S,u]),ei=function({scrollRef:e,tableRef:t,isEnabled:a}){let[n,l]=(0,o.useState)("sticky");return(0,o.useLayoutEffect)(()=>{if(!a){l("hidden");return}let n=e.current,o=t.current;if(!n||!o||"undefined"==typeof ResizeObserver){l("sticky");return}let updateMode=()=>{let e=n.scrollHeight-n.clientHeight>2;l(e?"sticky":"inline")};updateMode();let r=new ResizeObserver(updateMode);return r.observe(n),r.observe(o),()=>r.disconnect()},[e,t,a]),n}({scrollRef:D,tableRef:I,isEnabled:!!h});return(0,n.jsxs)("section",{className:r().tableCard,"aria-label":f,style:{"--transactions-font-scale":x},children:[b,(0,n.jsxs)("div",{className:r().tableShell,children:[n.jsx("div",{ref:R,className:r().tableScroll,"data-testid":"transactions-table-container",children:(0,n.jsxs)("table",{ref:I,className:r().table,style:{"--table-min-width":`${et}px`},children:[n.jsx(TableBaseHeader,{columns:q,definitionMap:$,isColumnReorderMode:y,activeDropTarget:E,onColumnDragStart:ea,onColumnDragEnter:en,onColumnDragOver:eo,onColumnDrop:el,onColumnDragEnd:er,allSelected:P,isIndeterminate:G,onSelectAll:c,headerCheckboxRef:F,onColumnVisibilityChange:T,visibleColumnIds:ee,sortState:C,onSortChange:N,isFetching:B,transactions:t,pinnedLeftOffsets:J,pinnedRightOffsets:Y}),n.jsx(TableBaseBody,{transactions:t,columns:q,selectionSet:O,onSelectRow:l,hiddenColumnIds:U,isColumnReorderMode:y,isShowingSelectedOnly:k,getRowId:z,renderRowActionsCell:w,onEditRow:es,pinnedLeftOffsets:J,pinnedRightOffsets:Y}),V>0?n.jsx("tfoot",{children:(0,n.jsxs)("tr",{className:r().totalRow,children:[n.jsx("td",{className:`${r().bodyCell} ${r().checkboxCell} ${r().stickyLeft}`,style:{minWidth:"48px",width:"48px"},children:n.jsx("div",{className:r().checkboxCellInner,children:n.jsx("span",{className:r().totalLabel,children:"TOTAL"})})}),q.map(e=>{let{id:t,minWidth:a,width:o,align:l}=e,s=W[t],i=U.has(t),c="left"===e.pinned,d="right"===e.pinned,u=[r().bodyCell,r().totalCell,"right"===l?r().cellAlignRight:"center"===l?r().cellAlignCenter:"",c?r().stickyLeft:"",d?r().stickyRight:"",i&&y?r().bodyCellHidden:""].filter(Boolean).join(" "),m=c?{left:`${J.get(t)??0}px`}:d?{right:`${Y.get(t)??0}px`}:void 0;return n.jsx("td",{className:u,style:{minWidth:`${a}px`,width:`${o}px`,...m},"aria-hidden":i&&y?"true":void 0,children:s?n.jsx("span",{className:"amount"===t?`${r().totalValue} ${r().totalAmount}`:r().totalValue,children:s}):null},`total-${t}`)}),n.jsx("td",{className:`${r().bodyCell} ${r().actionsCell}`,style:{minWidth:"60px",width:"60px"},"aria-hidden":"true"})]})}):null]})}),B?n.jsx(s.Z,{className:r().loadingIndicator,message:"Refreshing data…"}):null,h&&"hidden"!==ei?n.jsx("div",{className:`${r().paginationBar} ${"inline"===ei?r().paginationInline:r().paginationSticky}`,children:h.render({selectedCount:O.size})}):null]}),V>0?n.jsx(MiniToolbar,{selectedCount:V,onDelete:Z,onCancel:Q}):null]})})},2348:(e,t,a)=>{"use strict";a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>AddTransactionModal});var o=a(997),l=a(6689),r=a(3692),s=a(6327),i=a(6233),c=a.n(i),d=a(4573),u=a(4984),m=a(2550),_=a(832),p=a(4648),h=a(7973),b=a(6110),f=a(8742),g=a(477),y=a(1196),T=a(2055),v=a.n(T),x=e([s,_,p]);[s,_,p]=x.then?(await x)():x;let C=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],getTodayDateString=()=>{let e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate());return t.toISOString().slice(0,10)},buildMonthTag=(e,t=0)=>{if(!e)return"";let[a,n]=e.split("-"),o=Number(a),l=Number(n);if(!Number.isFinite(o)||!Number.isFinite(l))return"";let r=new Date(o,l-1+t,1);if(Number.isNaN(r.getTime()))return"";let s=C[r.getMonth()]??"",i=String(r.getFullYear()).slice(-2).padStart(2,"0");return s?`${s}${i}`:""},N={date:"",account:"",amount:"",notes:"",debtType:"debt",debtPerson:"",debtCategory:"",debtTag:"",debtLastMonth:!1,incomeCategory:"",incomeShop:"",expenseCategory:"",expenseShop:"",transferCategory:"",transferFromAccount:"",transferToAccount:"",percentBack:"",fixedBack:"",noBackEng:!1},createInitialFormState=()=>{let e=getTodayDateString(),t=buildMonthTag(e);return{...N,date:e,debtTag:t}},k=["Debt Category 1","Loan Repayment"],B=["Salary","Bonus"],A=["Groceries","Dining","Transport"],j=["Main Shop","Online Store","Local Market"],w=["AUG25","SEP25","OCT25","JUL25","JUN25","MAY25"],S=["Internal Transfer","Savings Allocation"],M=[{value:"debt",label:"Debt",tone:"negative"},{value:"income",label:"Income",tone:"positive"},{value:"expenses",label:"Expenses",tone:"negative"},{value:"transfer",label:"Transfer",tone:"positive"}],E=M[0].value;function AddTransactionModal({isOpen:e,onClose:t,onSave:a,onRequestClose:n}){let{activeAccounts:i,createAccount:T}=(0,g.x)(),{activePeople:x}=(0,y.u)(),C=(0,l.useRef)(createInitialFormState()),H=(0,l.useRef)(null),[F,L]=(0,l.useState)(E),[D,I]=(0,l.useState)(()=>C.current),[R,$]=(0,l.useState)(""),[O,z]=(0,l.useState)(C.current.date),[P,G]=(0,l.useState)(C.current.debtTag),[W,V]=(0,l.useState)(C.current.debtLastMonth),[Z,Q]=(0,l.useState)(!1),[K,U]=(0,l.useState)(!1),[q,J]=(0,l.useState)(""),[Y,X]=(0,l.useState)(!1),[ee,et]=(0,l.useState)(""),ea=(0,l.useMemo)(()=>i.map(e=>e.accountName),[i]),en=(0,l.useMemo)(()=>x.map(e=>e.fullName),[x]),eo=(0,l.useMemo)(()=>buildMonthTag(O),[O]),el=(0,l.useMemo)(()=>buildMonthTag(O,-1),[O]),er=(0,l.useMemo)(()=>{if(!O)return"";let[e,t,a]=O.split("-");return e&&t&&a?`${a.padStart(2,"0")}/${t.padStart(2,"0")}/${e}`:""},[O]),es=(0,l.useMemo)(()=>`add-transaction-new-item-${Math.random().toString(36).slice(2)}`,[]),ei=(0,l.useCallback)(()=>{let e=createInitialFormState();C.current=e,I(e),z(e.date),G(e.debtTag),V(e.debtLastMonth),L(E),$(""),Q(!1),J(""),X(!1),et("")},[]);(0,l.useEffect)(()=>{e&&ei()},[e,ei]);let ec=(0,l.useCallback)((e,t)=>{I(a=>({...a,[e]:t}))},[]),ed=(0,l.useMemo)(()=>{let e=C.current??N;return Object.keys(e).some(t=>{let a=e[t],n=D[t];return"boolean"==typeof a?!!a!=!!n:(a??"")!==(n??"")})},[D]),eu=(0,l.useCallback)(()=>{ei(),t?.()},[t,ei]),em=(0,l.useCallback)(async()=>{if(!ed){eu();return}if(n){try{let e=await n({hasChanges:!0});e&&eu()}catch(e){console.error(e)}return}X(!0)},[eu,ed,n]);(0,l.useEffect)(()=>{if(!e)return;let handleKeyDown=e=>{"Escape"===e.key&&(e.preventDefault(),em())};return document.addEventListener("keydown",handleKeyDown),()=>{document.removeEventListener("keydown",handleKeyDown)}},[e,em]),(0,l.useEffect)(()=>{ec("date",O)},[O,ec]),(0,l.useEffect)(()=>{let e=W?el:eo;e&&G(t=>t===e?t:e)},[eo,el,W]),(0,l.useEffect)(()=>{ec("debtTag",P??"")},[P,ec]),(0,l.useEffect)(()=>{ec("debtLastMonth",W)},[W,ec]);let e_="add-transaction-modal-title",ep="add-transaction-modal-description",handleNotesChange=e=>{ec("notes",e.target.value)},eh=(0,l.useCallback)(()=>{requestAnimationFrame(()=>{H.current?.focus()})},[]),eb=(0,l.useCallback)(()=>{if(!D.notes){R&&$("");return}$(D.notes),ec("notes",""),eh()},[D.notes,eh,R,ec]),ef=(0,l.useCallback)(()=>{R&&(ec("notes",R),$(""),eh())},[eh,R,ec]);(0,l.useEffect)(()=>{if(!e)return;let t=H.current;if(!t)return;let handleNotesKeyDown=e=>{if("Escape"===e.key&&e.target===t){if(e.preventDefault(),e.stopPropagation(),D.notes){eb();return}if(R){ef();return}em()}};return t.addEventListener("keydown",handleNotesKeyDown),()=>{t.removeEventListener("keydown",handleNotesKeyDown)}},[D.notes,eb,ef,e,R,em]),(0,l.useEffect)(()=>{R&&D.notes&&D.notes!==R&&$("")},[D.notes,R]);let eg="repay"===D.debtType,ey="Sacombank"===D.account,eT=W?el:eo,ev=(0,l.useMemo)(()=>{let e=new Set(w);return eT&&e.add(eT),P&&e.add(P),Array.from(e).filter(Boolean).sort()},[eT,P]),ex=(0,l.useMemo)(()=>{let e=D.transferFromAccount,t=D.transferToAccount;return!!(e&&t&&e===t)},[D.transferFromAccount,D.transferToAccount]),eC=(0,l.useCallback)(()=>{V(e=>!e)},[]),renderDateField=({label:e="Date",className:t="",showFormatted:a=!0}={})=>{let n=[v().field,t].filter(Boolean).join(" ");return(0,o.jsxs)("div",{className:n,children:[(0,o.jsxs)("div",{className:v().fieldLabelRow,children:[o.jsx("label",{className:v().fieldLabel,htmlFor:"transaction-date",children:e}),a&&er?o.jsx("span",{className:v().dateDisplay,children:er}):null]}),o.jsx("input",{id:"transaction-date",type:"date",className:`${v().input} ${v().formFieldBase}`,value:O,onChange:e=>z(e.target.value)})]})},eN=(0,l.useMemo)(()=>{if(ee)return[];let e=(0,f.Zv)(D.amount);return e.map((e,t)=>({...e,key:`${t}-${e.part}-${e.isNumber?"n":"t"}`}))},[ee,D.amount]),renderAmountField=({className:e=""}={})=>{let t=[v().field,e].filter(Boolean).join(" "),a="string"==typeof ee&&ee.startsWith("Error:"),n=[v().amountWordsPlaceholderInline,c().historyText,a?c().historyError:""].filter(Boolean).join(" ");return(0,o.jsxs)("div",{className:t,children:[(0,o.jsxs)("div",{className:v().fieldLabelRow,children:[o.jsx("label",{className:v().fieldLabel,htmlFor:"transaction-amount",children:"Amount"}),ee?o.jsx("span",{className:n,children:ee}):eN.length>0?o.jsx("span",{className:v().amountWordsPlaceholderInline,children:eN.map(e=>o.jsx("span",{className:e.isNumber?c().amountWordsNumber:void 0,children:e.part},e.key))}):null]}),o.jsx(s.ZP,{id:"transaction-amount",value:D.amount,onChange:e=>ec("amount",e),onHistoryChange:et,placeholder:"0",className:`${v().input} ${v().formFieldBase}`})]})},renderNotesField=({className:e="",fullRow:t=!0}={})=>{let a=[v().field,v().notesFieldContainer];return t&&a.push(v().fullRow),e&&a.push(e),(0,o.jsxs)("div",{className:a.join(" "),children:[o.jsx("div",{className:v().fieldLabelRow,children:o.jsx("label",{className:v().fieldLabel,htmlFor:"transaction-notes",children:"Notes"})}),(0,o.jsxs)("div",{className:v().inputWrapper,children:[o.jsx("textarea",{id:"transaction-notes",className:v().textarea,value:D.notes,onChange:handleNotesChange,placeholder:"Add a note or short description",rows:1,ref:H}),(0,o.jsxs)("div",{className:v().notesActions,children:[D.notes?o.jsx("button",{type:"button",className:`${v().notesIconButton} ${v().notesClearButton}`,onClick:eb,"aria-label":"Clear notes",title:"Clear notes",children:o.jsx(r.q5L,{"aria-hidden":!0})}):null,!D.notes&&R?o.jsx("button",{type:"button",className:`${v().notesIconButton} ${v().notesRestoreButton}`,onClick:ef,"aria-label":"Restore last cleared notes",title:"Restore last cleared notes",children:o.jsx(r.bxQ,{"aria-hidden":!0})}):null]})]})]})},ek=(0,l.useCallback)(e=>{J(e),"Account"===e?U(!0):Q(!0)},[]),eB=(0,l.useCallback)(()=>{Q(!1),J("")},[]),eA=(0,l.useCallback)(()=>{U(!1),J("")},[]),ej=(0,l.useCallback)(async e=>{try{let t=await T(e);if(t)return ec("account",t.accountName),"transfer"!==F||(D.transferFromAccount?D.transferToAccount||ec("transferToAccount",t.accountName):ec("transferFromAccount",t.accountName)),!0;return!1}catch(e){return console.error("Failed to create account",e),!1}},[T,ec,F,D]),ew=(0,l.useCallback)(()=>{X(!1),eu()},[eu]),eS=(0,l.useCallback)(()=>{X(!1)},[]),eM=q?`Add New ${q}`:"Add New Item";return e?(0,o.jsxs)(o.Fragment,{children:[o.jsx("div",{className:v().overlay,onClick:e=>{e.target===e.currentTarget&&em()},children:(0,o.jsxs)("div",{className:v().modal,onClick:e=>e.stopPropagation(),role:"dialog","aria-modal":"true","aria-labelledby":e_,"aria-describedby":ep,children:[(0,o.jsxs)("header",{className:v().header,children:[(0,o.jsxs)("div",{children:[o.jsx("h2",{className:v().title,id:e_,children:"Add New Transaction"}),o.jsx("p",{className:v().subtitle,id:ep,children:"Capture every inflow, expense, or transfer without leaving the history screen."})]}),o.jsx("button",{type:"button",className:v().closeButton,onClick:em,"aria-label":"Close",children:o.jsx(r.q5L,{"aria-hidden":!0})})]}),(0,o.jsxs)("div",{className:v().modalBody,children:[o.jsx("div",{className:v().transactionTypeSelector,children:o.jsx(m.Z,{className:v().transactionTypeSegmented,options:M,value:F,onChange:e=>{let t=M.some(t=>t.value===e);L(t?e:E)},name:"transaction-type",ariaLabel:"Transaction Type"})}),(0,o.jsxs)("section",{className:v().tabPanel,id:`add-transaction-panel-${F}`,role:"region","aria-labelledby":`transaction-type-${F}`,children:["debt"===F?o.jsx(_.Z,{formValues:D,updateField:ec,renderDateField:renderDateField,renderAmountField:renderAmountField,renderNotesField:renderNotesField,personOptions:en,accountOptions:ea,debtCategoryOptions:k,debtTagOptions:ev,selectedDebtTag:P,onDebtTagSelect:e=>{G(e||"")},debtTagLabel:eg?"Debt Repayments":"Debt Tag",debtTagModalType:eg?"Debt Repayment":"Debt Tag",onOpenNewItemModal:ek,isRepayMode:eg,isLastMonth:W,onToggleLastMonth:eC,isCashbackEligible:ey,percentBack:D.percentBack,fixedBack:D.fixedBack,noBackEng:D.noBackEng}):null,"income"===F?o.jsx(h.Z,{formValues:D,updateField:ec,renderDateField:renderDateField,renderAmountField:renderAmountField,renderNotesField:renderNotesField,accountOptions:ea,categoryOptions:B,shopOptions:j,onOpenNewItemModal:ek}):null,"expenses"===F?o.jsx(p.Z,{formValues:D,updateField:ec,renderDateField:renderDateField,renderAmountField:renderAmountField,renderNotesField:renderNotesField,accountOptions:ea,categoryOptions:A,shopOptions:j,onOpenNewItemModal:ek,isCashbackEligible:ey,percentBack:D.percentBack,fixedBack:D.fixedBack,noBackEng:D.noBackEng}):null,"transfer"===F?o.jsx(b.Z,{formValues:D,updateField:ec,renderDateField:renderDateField,renderAmountField:renderAmountField,renderNotesField:renderNotesField,accountOptions:ea,categoryOptions:S,onOpenNewItemModal:ek,isTransferAccountConflict:ex}):null]})]}),(0,o.jsxs)("footer",{className:v().actions,children:[o.jsx("button",{type:"button",className:v().secondaryButton,onClick:em,children:"Cancel"}),o.jsx("button",{type:"button",className:v().primaryButton,onClick:()=>{let e={...D,kind:F};a?a(e):console.log("Save transaction draft",e),eu()},children:"Save Transaction"})]})]})}),o.jsx(d.c,{isOpen:Y,title:"Discard unsaved changes?",message:"You have transaction details that haven't been saved yet. Closing now will discard them.",confirmLabel:"Discard",cancelLabel:"Keep editing",confirmTone:"danger",onConfirm:ew,onCancel:eS}),o.jsx(u.Z,{isOpen:K,onClose:eA,onSubmit:ej}),Z?o.jsx("div",{className:v().mockOverlay,role:"dialog","aria-modal":"true","aria-labelledby":es,onClick:e=>{e.target===e.currentTarget&&eB()},children:(0,o.jsxs)("div",{className:v().mockModal,role:"document",onClick:e=>e.stopPropagation(),children:[o.jsx("h3",{className:v().mockModalTitle,id:es,children:eM}),o.jsx("p",{className:v().mockModalBody,children:"This is a placeholder modal for creating new dropdown entries. Replace it with the appropriate form when ready."}),o.jsx("button",{type:"button",className:v().mockModalButton,onClick:eB,children:"Close Mock"})]})}):null]}):null}n()}catch(e){n(e)}})},832:(e,t,a)=>{"use strict";a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>DebtTabContent});var o=a(997),l=a(6327),r=a(3027),s=a(2055),i=a.n(s),c=e([l]);function DebtTabContent({formValues:e,updateField:t,renderDateField:a,renderAmountField:n,renderNotesField:s,personOptions:c,accountOptions:d,debtCategoryOptions:u,debtTagOptions:m,selectedDebtTag:_,onDebtTagSelect:p,debtTagLabel:h,debtTagModalType:b,onOpenNewItemModal:f,isRepayMode:g,isLastMonth:y,onToggleLastMonth:T,isCashbackEligible:v,percentBack:x,fixedBack:C,noBackEng:N}){let k="debt-last-month-toggle-label",B="debt-no-back-eng-label",A=Number(e.amount)>0;return(0,o.jsxs)("div",{className:i().debtSection,children:[(0,o.jsxs)("div",{className:i().debtGrid,children:[(0,o.jsxs)("div",{className:`${i().debtTypeGroup} ${i().gridField}`,children:[o.jsx("span",{className:i().fieldLabel,children:"Debt Type"}),(0,o.jsxs)("button",{type:"button",className:`${i().debtTypeToggle} ${i().formFieldBase} ${g?i().debtTypeToggleRepay:i().debtTypeToggleDebt}`,onClick:()=>t("debtType",g?"debt":"repay"),role:"switch","aria-checked":g,children:[o.jsx("span",{className:i().debtTypeOption,"data-active":g?"false":"true","data-variant":"debt",children:"Debt"}),o.jsx("span",{className:i().debtTypeOption,"data-active":g?"true":"false","data-variant":"repay",children:"Repayment"}),o.jsx("span",{className:i().debtTypeThumb,"aria-hidden":!0})]})]}),o.jsx(r.Z,{label:"Person",options:c,value:e.debtPerson,onChange:e=>t("debtPerson",e),placeholder:"Select person",className:`${i().dropdownField} ${i().gridField} ${i().formFieldBase}`,onAddNew:()=>f("Person")}),a({className:`${i().dateField} ${i().gridField}`}),o.jsx(r.Z,{label:"Account",options:d,value:e.account,onChange:e=>t("account",e),placeholder:"Select account",className:`${i().dropdownField} ${i().gridField} ${i().formFieldBase}`,onAddNew:()=>f("Account")}),o.jsx(r.Z,{label:"Category",options:u,value:e.debtCategory,onChange:e=>t("debtCategory",e),placeholder:"Select category",className:`${i().dropdownField} ${i().gridField} ${i().formFieldBase}`,onAddNew:()=>f("Debt Category")}),n({className:i().gridField}),v?(0,o.jsxs)("div",{className:`${i().cashbackSection} ${i().fullRow}`,children:[(0,o.jsxs)("div",{className:i().cashbackInputRow,children:[(0,o.jsxs)("div",{className:i().field,children:[o.jsx("label",{className:i().fieldLabel,htmlFor:"transaction-percent-back",children:"% Back"}),o.jsx("input",{id:"transaction-percent-back",type:"number",min:"0",max:"100",step:"0.01",inputMode:"decimal",className:`${i().input} ${i().formFieldBase} ${i().percentBackInput}`,value:x,onChange:e=>t("percentBack",e.target.value),placeholder:"0.00"})]}),(0,o.jsxs)("div",{className:i().field,children:[o.jsx("label",{className:i().fieldLabel,htmlFor:"transaction-fixed-back",children:"Fix Back"}),o.jsx(l.ZP,{id:"transaction-fixed-back",value:C,onChange:e=>t("fixedBack",e),placeholder:"0",className:`${i().input} ${i().formFieldBase} ${i().fixedBackInput}`})]}),(0,o.jsxs)("div",{className:`${i().toggleField} ${i().formFieldBase} ${i().noBackEngToggle}`,children:[o.jsx("span",{className:i().fieldLabel,id:B,children:"None Back"}),o.jsx("button",{type:"button",className:`${i().switchButton} ${N?i().switchButtonActive:""}`,onClick:()=>t("noBackEng",!N),role:"switch","aria-checked":N,"aria-labelledby":B,children:o.jsx("span",{className:i().switchTrack,children:o.jsx("span",{className:i().switchThumb})})})]})]}),o.jsx("div",{className:i().cashbackHint,children:A?"Suggested rate: X%. Raw=Y, Final=Z. Cap info.":"Enter Amount > 0 to calculate cashback."})]}):null,o.jsx(r.Z,{label:h,options:m,value:_,onChange:e=>p(e),placeholder:"Select or search debt tag",className:`${i().dropdownField} ${i().gridField} ${i().formFieldBase}`,onAddNew:()=>f(b)}),(0,o.jsxs)("div",{className:`${i().toggleField} ${i().gridField} ${i().formFieldBase}`,children:[o.jsx("span",{className:i().fieldLabel,id:k,children:"Last Month"}),o.jsx("button",{type:"button",className:`${i().switchButton} ${y?i().switchButtonActive:""}`,onClick:T,role:"switch","aria-checked":y,"aria-labelledby":k,children:o.jsx("span",{className:i().switchTrack,children:o.jsx("span",{className:i().switchThumb})})})]})]}),s({className:i().debtNotesField,fullRow:!1})]})}l=(c.then?(await c)():c)[0],n()}catch(e){n(e)}})},4648:(e,t,a)=>{"use strict";a.a(e,async(e,n)=>{try{a.d(t,{Z:()=>ExpensesTabContent});var o=a(997),l=a(6327),r=a(3027),s=a(2055),i=a.n(s),c=e([l]);function ExpensesTabContent({formValues:e,updateField:t,renderDateField:a,renderAmountField:n,renderNotesField:s,accountOptions:c,categoryOptions:d,shopOptions:u,onOpenNewItemModal:m,isCashbackEligible:_,percentBack:p,fixedBack:h,noBackEng:b}){let f=Number(e.amount)>0,g="expenses-no-back-eng-label";return(0,o.jsxs)("div",{className:i().formGrid,children:[a(),o.jsx(r.Z,{label:"Account",options:c,value:e.account,onChange:e=>t("account",e),placeholder:"Select account",className:i().dropdownField,onAddNew:()=>m("Account")}),n(),_?(0,o.jsxs)("div",{className:`${i().cashbackSection} ${i().fullRow}`,children:[(0,o.jsxs)("div",{className:i().cashbackInputRow,children:[(0,o.jsxs)("div",{className:i().field,children:[o.jsx("label",{className:i().fieldLabel,htmlFor:"expenses-percent-back",children:"% Back"}),o.jsx("input",{id:"expenses-percent-back",type:"number",min:"0",max:"100",step:"0.01",inputMode:"decimal",className:`${i().input} ${i().formFieldBase} ${i().percentBackInput}`,value:p,onChange:e=>t("percentBack",e.target.value),placeholder:"0.00"})]}),(0,o.jsxs)("div",{className:i().field,children:[o.jsx("label",{className:i().fieldLabel,htmlFor:"expenses-fixed-back",children:"Fix Back"}),o.jsx(l.ZP,{id:"expenses-fixed-back",value:h,onChange:e=>t("fixedBack",e),placeholder:"0",className:`${i().input} ${i().formFieldBase} ${i().fixedBackInput}`})]}),(0,o.jsxs)("div",{className:`${i().toggleField} ${i().formFieldBase} ${i().noBackEngToggle}`,children:[o.jsx("span",{className:i().fieldLabel,id:g,children:"None Back"}),o.jsx("button",{type:"button",className:`${i().switchButton} ${b?i().switchButtonActive:""}`,onClick:()=>t("noBackEng",!b),role:"switch","aria-checked":b,"aria-labelledby":g,children:o.jsx("span",{className:i().switchTrack,children:o.jsx("span",{className:i().switchThumb})})})]})]}),o.jsx("div",{className:i().cashbackHint,children:f?"Suggested rate: X%. Raw=Y, Final=Z. Cap info.":"Enter Amount > 0 to calculate cashback."})]}):null,o.jsx(r.Z,{label:"Category",options:d,value:e.expenseCategory,onChange:e=>t("expenseCategory",e),placeholder:"Select expense category",className:i().dropdownField,onAddNew:()=>m("Expense Category")}),o.jsx(r.Z,{label:"Shop (optional)",options:u,value:e.expenseShop,onChange:e=>t("expenseShop",e),placeholder:"Select shop",className:`${i().dropdownField} ${i().fullRow}`,onAddNew:()=>m("Shop")}),s()]})}l=(c.then?(await c)():c)[0],n()}catch(e){n(e)}})},7973:(e,t,a)=>{"use strict";a.d(t,{Z:()=>IncomeTabContent});var n=a(997),o=a(3027),l=a(2055),r=a.n(l);function IncomeTabContent({formValues:e,updateField:t,renderDateField:a,renderAmountField:l,renderNotesField:s,accountOptions:i,categoryOptions:c,shopOptions:d,onOpenNewItemModal:u}){return(0,n.jsxs)("div",{className:r().formGrid,children:[a(),n.jsx(o.Z,{label:"Account",options:i,value:e.account,onChange:e=>t("account",e),placeholder:"Select account",className:r().dropdownField,onAddNew:()=>u("Account")}),l(),n.jsx(o.Z,{label:"Category",options:c,value:e.incomeCategory,onChange:e=>t("incomeCategory",e),placeholder:"Select income category",className:r().dropdownField,onAddNew:()=>u("Income Category")}),n.jsx(o.Z,{label:"Shop (optional)",options:d,value:e.incomeShop,onChange:e=>t("incomeShop",e),placeholder:"Select shop",className:`${r().dropdownField} ${r().fullRow}`,onAddNew:()=>u("Shop")}),s()]})}},6110:(e,t,a)=>{"use strict";a.d(t,{Z:()=>TransferTabContent});var n=a(997),o=a(3027),l=a(2055),r=a.n(l);function TransferTabContent({formValues:e,updateField:t,renderDateField:a,renderAmountField:l,renderNotesField:s,accountOptions:i,categoryOptions:c,onOpenNewItemModal:d,isTransferAccountConflict:u}){return(0,n.jsxs)("div",{className:r().transferSection,children:[(0,n.jsxs)("div",{className:r().formRow,children:[a(),l()]}),(0,n.jsxs)("div",{className:r().formRow,children:[n.jsx(o.Z,{label:"Category",options:c,value:e.transferCategory,onChange:e=>t("transferCategory",e),placeholder:"Select transfer category",className:r().dropdownField,onAddNew:()=>d("Transfer Category")}),s({fullRow:!1})]}),(0,n.jsxs)("div",{className:r().formRow,children:[n.jsx(o.Z,{label:"From account",options:i,value:e.transferFromAccount,onChange:e=>t("transferFromAccount",e),placeholder:"Select source",className:r().dropdownField,hasError:u,onAddNew:()=>d("Account")}),n.jsx(o.Z,{label:"To account",options:i,value:e.transferToAccount,onChange:e=>t("transferToAccount",e),placeholder:"Select destination",className:r().dropdownField,hasError:u,onAddNew:()=>d("Account")})]}),u?n.jsx("p",{className:r().fieldError,children:"Cannot transfer to the same account"}):null]})}},2550:(e,t,a)=>{"use strict";a.d(t,{Z:()=>SegmentedControl});var n=a(997),o=a(6689),l=a(3130),r=a.n(l);let s={negative:r().segmentedControlThumbNegative,positive:r().segmentedControlThumbPositive,neutral:r().segmentedControlThumbNeutral},normalizeTone=e=>"negative"===e||"positive"===e?e:"neutral";function SegmentedControl({options:e,value:t,onChange:a,name:l,className:i="",ariaLabel:c}){let d=(0,o.useRef)([]),{activeIndex:u,activeTone:m,optionCount:_,selectedValue:p}=(0,o.useMemo)(()=>{let a=Array.isArray(e)?e.length:0;if(!a)return{activeIndex:0,activeTone:"neutral",optionCount:0,selectedValue:null};let n=Math.max(0,e.findIndex(e=>e.value===t)),o=e[n]?.tone??e[0]?.tone??"neutral";return{activeIndex:n,activeTone:normalizeTone(o),optionCount:a,selectedValue:e[n]?.value??e[0]?.value??null}},[e,t]),handleSelect=e=>{a&&e!==t&&a(e)},focusOptionAt=e=>{d.current[e]?.focus()},handleKeyDown=(t,a)=>{if(!Array.isArray(e)||0===e.length)return;let n=a;if("ArrowRight"===t.key||"ArrowDown"===t.key)n=(a+1)%e.length;else if("ArrowLeft"===t.key||"ArrowUp"===t.key)n=(a-1+e.length)%e.length;else if("Home"===t.key)n=0;else{if("End"!==t.key)return;n=e.length-1}let o=e[n];o&&(t.preventDefault(),handleSelect(o.value),focusOptionAt(n))},h=[r().segmentedControl];i&&h.push(i);let b=[r().segmentedControlThumb];b.push(s[normalizeTone(m)]);let f={};return c&&(f["aria-label"]=c),n.jsx("div",{className:h.join(" "),role:"radiogroup",...f,children:(0,n.jsxs)("div",{className:r().segmentedControlTrack,children:[_>0?n.jsx("span",{className:b.join(" "),style:{width:`${100/_}%`,transform:`translateX(${100*u}%)`},"aria-hidden":!0}):null,Array.isArray(e)?e.map((e,t)=>{let a=normalizeTone(e.tone),o=e.value===p,s=[r().segmentedControlOption,r()[`segmentedControlOption${a[0].toUpperCase()}${a.slice(1)}`]];o&&s.push(r().segmentedControlOptionActive);let i=l?`${l}-${e.value}`:void 0;return n.jsx("button",{type:"button",className:s.join(" "),role:"radio","aria-checked":o,tabIndex:o?0:-1,onClick:()=>handleSelect(e.value),onKeyDown:e=>handleKeyDown(e,t),ref:e=>{d.current[t]=e},name:l,id:i,children:e.label},e.value)}):null]})})}},477:(e,t,a)=>{"use strict";a.d(t,{x:()=>useAccounts});var n=a(6689);function useAccounts(){let[e,t]=(0,n.useState)([]),[a,o]=(0,n.useState)(!1),[l,r]=(0,n.useState)(null),s=(0,n.useCallback)(async()=>{o(!0),r(null);try{let e=await fetch("/api/accounts");if(!e.ok){let t=await e.text();throw Error(t||"Failed to load accounts")}let a=await e.json(),n=Array.isArray(a)?a:a?.accounts;if(!Array.isArray(n)){t([]);return}let o=n.map(e=>({...e,openingBalance:Number(e.openingBalance??0),currentBalance:Number(e.currentBalance??0),totalIn:Number(e.totalIn??0),totalOut:Number(e.totalOut??0)}));t(o)}catch(a){let e=a instanceof Error?a.message:"Unable to fetch accounts";r(e),t([])}finally{o(!1)}},[]),i=(0,n.useCallback)(async e=>{try{let a=await fetch("/api/accounts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){let e=await a.json();throw Error(e.error||e.details||"Failed to create account")}let n=await a.json(),o={...n,openingBalance:Number(n.openingBalance??0),currentBalance:Number(n.currentBalance??0),totalIn:Number(n.totalIn??0),totalOut:Number(n.totalOut??0)};return t(e=>[...e,o]),o}catch(t){let e=t instanceof Error?t.message:"Failed to create account";return r(e),null}},[]);(0,n.useEffect)(()=>{s()},[s]);let c=e.filter(e=>"active"===e.status);return{accounts:e,activeAccounts:c,isLoading:a,error:l,refetch:s,createAccount:i}}},1196:(e,t,a)=>{"use strict";a.d(t,{u:()=>usePeople});var n=a(6689);function usePeople(){let[e,t]=(0,n.useState)([]),[a,o]=(0,n.useState)(!1),[l,r]=(0,n.useState)(null),s=(0,n.useCallback)(async()=>{o(!0),r(null);try{let e=await fetch("/api/people");if(!e.ok){let t=await e.text();throw Error(t||"Failed to load people")}let a=await e.json(),n=Array.isArray(a)?a:a?.people;if(!Array.isArray(n)){t([]);return}t(n)}catch(a){let e=a instanceof Error?a.message:"Unable to fetch people";r(e),t([])}finally{o(!1)}},[]),i=(0,n.useCallback)(async e=>{try{let a=await fetch("/api/people",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){let e=await a.json();throw Error(e.error||e.details||"Failed to create person")}let n=await a.json();return t(e=>[...e,n]),n}catch(t){let e=t instanceof Error?t.message:"Failed to create person";return r(e),null}},[]);(0,n.useEffect)(()=>{s()},[s]);let c=e.filter(e=>"active"===e.status);return{people:e,activePeople:c,isLoading:a,error:l,refetch:s,createPerson:i}}},8350:(e,t,a)=>{"use strict";a.d(t,{Q:()=>useRequireAuth});var n=a(1163),o=a(6689),l=a(6770);function useRequireAuth(){let e=(0,n.useRouter)(),{isAuthenticated:t,isLoading:a}=(0,l.a)();return(0,o.useEffect)(()=>{!a&&(t||e.replace("/login"))},[t,a,e]),{isAuthenticated:t,isLoading:a}}},3789:(e,t,a)=>{"use strict";a.d(t,{GW:()=>l,Gd:()=>getAccountTypeOptions,JV:()=>getAccountStatusOptions,VC:()=>getAccountTypeLabel});let n={BANK:"bank",CREDIT:"credit",SAVING:"saving",INVEST:"invest",E_WALLET:"e-wallet",GROUP:"group",LOAN:"loan",MORTGAGE:"mortgage",CASH:"cash",OTHER:"other"},o={bank:"Bank",credit:"Credit Card",saving:"Savings",invest:"Investment","e-wallet":"E-Wallet",group:"Group",loan:"Loan",mortgage:"Mortgage",cash:"Cash",other:"Other"};function getAccountTypeLabel(e){return e?o[e]??o[n.OTHER]:o[n.OTHER]}function getAccountTypeOptions(){return[n.BANK,n.CREDIT,n.SAVING,n.INVEST,n.E_WALLET,n.CASH,n.LOAN,n.MORTGAGE,n.GROUP,n.OTHER].map(e=>({value:e,label:getAccountTypeLabel(e)}))}let l={ACTIVE:"active",CLOSED:"closed",ARCHIVED:"archived"},r={active:"Active",closed:"Closed",archived:"Archived"};function getAccountStatusOptions(){return[l.ACTIVE,l.CLOSED,l.ARCHIVED].map(e=>({value:e,label:e?r[e]??r[l.ACTIVE]:r[l.ACTIVE]}))}},7871:(e,t,a)=>{"use strict";a.d(t,{Bo:()=>formatAmountWithTrailing,T3:()=>formatPercent,dN:()=>formatAmount});let n=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),o=new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:2});function formatAmount(e){if(null==e)return"0";let t=Number(e);if(Number.isNaN(t))return"0";let a=n.format(t);return a.replace(/\.00$/,"")}function formatAmountWithTrailing(e){if(null==e)return"0.00";let t=Number(e);return Number.isNaN(t)?"0.00":n.format(t)}function formatPercent(e){if(null==e)return"0%";let t=Number(e);return Number.isNaN(t)?"0%":`${o.format(t)}%`}},8742:(e,t,a)=>{"use strict";a.d(t,{Zv:()=>convertToVietnameseWordsAbbreviated});let n=["","ngh\xecn","triệu","tỷ","ngh\xecn tỷ","triệu tỷ","tỷ tỷ"],createGroupInfos=e=>{if(!e)return[];let t=[],a=e;for(;a.length>0;){let e=a.slice(-3);a=a.slice(0,-3),t.unshift(e)}return t.map((e,a)=>{let o=t.length-a-1,l=Number(e),r=String(l);return{numericValue:l,displayValue:r,unit:n[o]||""}})},sanitizeInput=e=>{if(null==e||"number"==typeof e&&Number.isNaN(e))return"";let t=String(e).trim();return t||""};function convertToVietnameseWordsAbbreviated(e){let t=sanitizeInput(e);if(!t)return[];let a=t.startsWith("-"),n=a?t.slice(1):t;if(!/^\d+(?:\.\d+)?$/.test(n))return[];let[o,l=""]=n.split("."),r=o.replace(/^0+(?=\d)/,"")||"0";if("0"===r)return[];let s=createGroupInfos(r),i=s.filter(e=>0!==e.numericValue);if(0===i.length)return[];let c=i.slice(0,2),d=[];if(a&&d.push({part:"\xe2m",isNumber:!1}),c.forEach((e,t)=>{d.length>0&&d.push({part:" ",isNumber:!1}),d.push({part:e.displayValue,isNumber:!0}),e.unit&&d.push({part:` ${e.unit}`,isNumber:!1})}),0===d.length)return[];let u=s.length>c.length||l.length>0;return u&&d.push({part:" ...",isNumber:!1}),d.push({part:" đồng",isNumber:!1}),d}},2246:(e,t,a)=>{"use strict";a.a(e,async(e,n)=>{try{a.d(t,{L$:()=>safeEvaluate,S7:()=>containsDivisionByZero,eZ:()=>normalizeExpression});var o=a(9530),l=e([o]);o=(l.then?(await l)():l)[0];let r=/[^0-9.+\-*/()]/g,s=/(\d)\(/g,i=/\)(\d)/g,c=/\)\(/g,d=/\/0+([1-9]\d*(?:\.\d+)?)/g,normalizeExpression=e=>{if(!e||"string"!=typeof e)return"";let t=e.trim();if(!t)return"";let a=t.replace(/\s+/g,"").replace(/,/g,"").replace(r,"");if(!a)return"";let n=a.replace(s,"$1*(").replace(i,")*$1").replace(c,")*(");return n.replace(d,(e,t)=>`/${t}`)},containsDivisionByZero=e=>{let t=normalizeExpression(e);if(!t)return!1;try{let e=(0,o.parse)(t),a=!1;return e.traverse(e=>{if(a||!e||!e.isOperatorNode||"/"!==e.op)return;let t=e.args?.[1];if(t)try{let e;let n=t.compile().evaluate({});e="number"==typeof n?n:n&&"function"==typeof n.toNumber?n.toNumber():Number(n),Number.isFinite(e)&&0===e&&(a=!0)}catch(e){e&&"string"==typeof e.message&&e.message.toLowerCase().includes("division by zero")&&(a=!0)}}),a}catch(e){return!1}};function safeEvaluate(e){let t=normalizeExpression(e);if(!t)return null;try{let e;let a=(0,o.evaluate)(t);if(e="number"==typeof a?a:a&&"function"==typeof a.toNumber?a.toNumber():Number(a),"number"==typeof e&&Number.isFinite(e))return e;return null}catch(e){return null}}n()}catch(e){n(e)}})},4061:(e,t,a)=>{"use strict";a.d(t,{A6:()=>n,MT:()=>normalizeTransactionType,yl:()=>getTransactionTypeLabel});let n={INCOME:"income",EXPENSES:"expenses",TRANSFER:"transfer",DEBT:"debt",CASHBACK:"cashback",ADJUSTMENT:"adjustment",OTHER:"other"},o={income:"Income",expenses:"Expenses",transfer:"Transfer",debt:"Debt",cashback:"Cashback",adjustment:"Adjustment",other:"Other"},l=new Map([["income","income"],["inflow","income"],["earnings","income"],["revenue","income"],["salary","income"],["expense","expenses"],["expenses","expenses"],["spend","expenses"],["spending","expenses"],["outflow","expenses"],["transfer","transfer"],["moved","transfer"],["movement","transfer"],["debt","debt"],["loan","debt"],["liability","debt"],["cashback","cashback"],["reward","cashback"],["rebate","cashback"],["adjustment","adjustment"],["adjust","adjustment"],["balance","adjustment"],["other","other"]]);function normalizeTransactionType(e){let t="string"==typeof e?e.trim().toLowerCase():"number"==typeof e&&Number.isFinite(e)?String(e):"";if(!t)return n.OTHER;if(l.has(t))return l.get(t)??n.OTHER;let a=t.replace(/[^a-z]/g,"");return l.has(a)?l.get(a)??n.OTHER:l.get(t.split(" ")[0])??n.OTHER}function getTransactionTypeLabel(e){return e?o[e]??o[n.OTHER]:o[n.OTHER]}}};