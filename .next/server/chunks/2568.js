exports.id=2568,exports.ids=[2568],exports.modules={5227:e=>{e.exports={appShell:"AppLayout_appShell__vZgFN",sidebar:"AppLayout_sidebar__KpXNR",sidebarCollapsed:"AppLayout_sidebarCollapsed__D3gch",brandSection:"AppLayout_brandSection__qx58r",brandLink:"AppLayout_brandLink__x_9Cz",brandAvatar:"AppLayout_brandAvatar__kUdGb",brandCopy:"AppLayout_brandCopy__BGDDZ",brandName:"AppLayout_brandName__Lwnr7",brandTagline:"AppLayout_brandTagline__wB_mj",collapseTrigger:"AppLayout_collapseTrigger__mltQR",nav:"AppLayout_nav__HLlbI",navGroup:"AppLayout_navGroup__Z0E6R",navLink:"AppLayout_navLink__eu9M7",navGroupTrigger:"AppLayout_navGroupTrigger__qq6kG",navLinkActive:"AppLayout_navLinkActive___cPu5",iconSlot:"AppLayout_iconSlot__MUEmN",collapsedIndicator:"AppLayout_collapsedIndicator__kXPDV",linkLabel:"AppLayout_linkLabel__GNk_1",chevron:"AppLayout_chevron__GzYP5",chevronOpen:"AppLayout_chevronOpen__6OyLl",subNav:"AppLayout_subNav__g6Q0b",subNavOpen:"AppLayout_subNavOpen__DAAaT",subNavLink:"AppLayout_subNavLink__nd4Vs",bullet:"AppLayout_bullet__cKBpj",sidebarFooter:"AppLayout_sidebarFooter__LBACF",mainColumn:"AppLayout_mainColumn__fsUA8",topNavBarContainer:"AppLayout_topNavBarContainer__CxB6m",mainContent:"AppLayout_mainContent__rg1ur",flyoutMenu:"AppLayout_flyoutMenu__m2FSX",flyoutSlideIn:"AppLayout_flyoutSlideIn__Wru_V",flyoutHeader:"AppLayout_flyoutHeader__jxXpU",flyoutTitle:"AppLayout_flyoutTitle__SpcvL",flyoutContent:"AppLayout_flyoutContent__2qbNh",flyoutLink:"AppLayout_flyoutLink__h3Jie",flyoutLinkActive:"AppLayout_flyoutLinkActive__eGVLj",slideIn:"AppLayout_slideIn__etVzU"}},4394:e=>{e.exports={navBar:"TopNavBar_navBar__m4jJM",brandLink:"TopNavBar_brandLink__Vg142",brandMark:"TopNavBar_brandMark__0rtSM",navListWrapper:"TopNavBar_navListWrapper__7j0k3",navList:"TopNavBar_navList__p5Z3i",navItem:"TopNavBar_navItem__YU1Ud",navItemHidden:"TopNavBar_navItemHidden__SxDs4",navLink:"TopNavBar_navLink__9mq6n",navLinkActive:"TopNavBar_navLinkActive__bjyo7",navActions:"TopNavBar_navActions__7ler7",iconButton:"TopNavBar_iconButton__lVxXm",moreWrapper:"TopNavBar_moreWrapper__qAz_4",moreTrigger:"TopNavBar_moreTrigger__IVYCb",moreMenu:"TopNavBar_moreMenu__0LvXm",moreMenuList:"TopNavBar_moreMenuList__E_7_K",mobileMenuWrapper:"TopNavBar_mobileMenuWrapper__IIDiy",mobileTrigger:"TopNavBar_mobileTrigger__4K3OQ",mobileLabel:"TopNavBar_mobileLabel__DR7NS",mobileMenu:"TopNavBar_mobileMenu__sMG_G",mobileMenuList:"TopNavBar_mobileMenuList__PF67Y",mobileChevron:"TopNavBar_mobileChevron__1lSpW",visuallyHidden:"TopNavBar_visuallyHidden__gO2Fu"}},2568:(e,a,n)=>{"use strict";n.d(a,{Z:()=>AppLayout});var t=n(997),r=n(6689),l=n(1664),i=n.n(l),s=n(1163),o=n(3692),u=n(6770),d=n(4394),c=n.n(d);function TopNavBar({navItems:e=[],activeKeys:a,onToggleTheme:n,onLogout:l,theme:s="light",settingsLink:u}){let d=(0,r.useMemo)(()=>a?a instanceof Set?a:Array.isArray(a)?new Set(a):new Set([a]):new Set,[a]),[p,h]=(0,r.useState)([]),[m,v]=(0,r.useState)(null),_=(0,r.useRef)(null),b=(0,r.useRef)(null),y=(0,r.useRef)(null),k=(0,r.useRef)(null),f=(0,r.useRef)(new Map),L=(0,r.useRef)(new Map),N=(0,r.useMemo)(()=>{let a=[];return e.forEach(e=>{e&&e.href&&a.push({key:e.key,label:e.label,href:e.href}),Array.isArray(e?.children)&&e.children.forEach(e=>{e&&e.href&&a.push({key:e.key,label:e.label,href:e.href})})}),u?.href&&a.push({key:u.key,label:u.label,href:u.href}),a},[e,u]),g=(0,r.useCallback)((e,a)=>{f.current||(f.current=new Map),a?f.current.set(e,a):f.current.delete(e)},[]),x=(0,r.useCallback)(()=>{let e=new Map(L.current);N.forEach(a=>{let n=f.current.get(a.key);if(n){let t=n.getBoundingClientRect();t.width>0&&e.set(a.key,t.width)}}),L.current=e},[N]),j=(0,r.useCallback)(()=>{let e=_.current;if(!e)return;x();let a=e.offsetWidth,n=b.current?.offsetWidth||64,t=N.map(e=>L.current.get(e.key)||0),r=t.length,l=t.reduce((e,a)=>e+a,0);if(l<=a){0!==p.length&&(h([]),"overflow"===m&&v(null));return}for(;r>0&&l+n>a;)r-=1,l-=t[r]??0;let i=N.slice(r).map(e=>e.key);h(i),0===i.length&&"overflow"===m&&v(null)},[N,x,p.length,m]);(0,r.useEffect)(()=>{j()},[j,s]);let A=(0,r.useMemo)(()=>new Set(p),[p]),T=null!==m,M="overflow"===m,w="mobile"===m;(0,r.useEffect)(()=>{let e=_.current;if(!e)return;let a=new ResizeObserver(()=>{j()});return a.observe(e),window.addEventListener("resize",j),()=>{a.disconnect(),window.removeEventListener("resize",j)}},[j]),(0,r.useEffect)(()=>{if(!T)return;let handlePointerDown=e=>{let a=y.current,n=k.current,t="overflow"===m?a:n;t&&t.contains(e.target)||v(null)};return document.addEventListener("pointerdown",handlePointerDown),()=>{document.removeEventListener("pointerdown",handlePointerDown)}},[T,m]),(0,r.useEffect)(()=>{0===p.length&&"overflow"===m&&v(null)},[p.length,m]);let C=N.filter(e=>A.has(e.key)),B=(0,r.useMemo)(()=>{let e=N.find(e=>d.has(e.key));return e?.label||"Menu"},[N,d]),S=(0,r.useCallback)(()=>{v(null)},[]),$=(0,r.useId)();if(0===N.length)return null;let renderNavLink=(e,{inOverflow:a=!1}={})=>{let n=d.has(e.key),r=`${c().navLink} ${n?c().navLinkActive:""}`.trim(),l=t.jsx(i(),{href:e.href,className:r,"data-overflow":a?"true":void 0,onClick:S,children:e.label});return a?t.jsx("li",{children:l},`overflow-${e.key}`):t.jsx("li",{ref:a=>g(e.key,a),className:A.has(e.key)?c().navItemHidden:c().navItem,"data-key":e.key,children:l},e.key)};return(0,t.jsxs)("nav",{className:c().navBar,"aria-label":"Primary navigation",children:[t.jsx(i(),{href:"/transactions",className:c().brandLink,onClick:S,"aria-label":"Money Flow home",children:t.jsx("span",{className:c().brandMark,children:"MF"})}),(0,t.jsxs)("div",{className:c().mobileMenuWrapper,ref:k,children:[(0,t.jsxs)("button",{type:"button",className:c().mobileTrigger,onClick:()=>{v(e=>"mobile"===e?null:"mobile")},"aria-haspopup":"menu","aria-expanded":w,"aria-controls":$,"aria-label":"Open navigation menu",children:[t.jsx("span",{className:c().mobileLabel,children:B}),t.jsx(o.bTu,{className:c().mobileChevron,"aria-hidden":"true"})]}),w?t.jsx("div",{className:c().mobileMenu,role:"menu",id:$,children:t.jsx("ul",{className:c().mobileMenuList,children:N.map(e=>renderNavLink(e,{inOverflow:!0}))})}):null]}),t.jsx("div",{className:c().navListWrapper,ref:_,children:t.jsx("ul",{className:c().navList,children:N.map(e=>renderNavLink(e))})}),(0,t.jsxs)("div",{className:c().navActions,children:[(0,t.jsxs)("div",{className:c().moreWrapper,"data-active":C.length>0?"true":"false",ref:y,children:[(0,t.jsxs)("button",{type:"button",className:`${c().iconButton} ${c().moreTrigger}`,"aria-haspopup":"menu","aria-expanded":M,onClick:()=>{0!==C.length&&v(e=>"overflow"===e?null:"overflow")},ref:b,disabled:0===C.length,children:[t.jsx(o.K9M,{"aria-hidden":"true"}),t.jsx("span",{className:c().visuallyHidden,children:"Open overflow navigation links"})]}),M?t.jsx("div",{className:c().moreMenu,role:"menu",children:t.jsx("ul",{className:c().moreMenuList,children:(C.length>0?C:N).map(e=>renderNavLink(e,{inOverflow:!0}))})}):null]}),t.jsx("button",{type:"button",className:c().iconButton,onClick:n,"aria-label":"dark"===s?"Switch to light theme":"Switch to dark theme",children:"dark"===s?t.jsx(o.kXG,{"aria-hidden":"true"}):t.jsx(o.wOW,{"aria-hidden":"true"})}),t.jsx("button",{type:"button",className:c().iconButton,onClick:l,"aria-label":"Log out",children:t.jsx(o.xqh,{"aria-hidden":"true"})})]})]})}var p=n(5227),h=n.n(p);let m=[{key:"dashboard",label:"Dashboard",href:"/dashboard",icon:o.aCJ},{key:"transactions",label:"Transactions History",href:"/transactions",icon:o.ERY},{key:"accounts",label:"Accounts",href:"/accounts",icon:o.XiQ,description:"Accounts â€“ overview and management"}];function isPathActive(e,a){return"/"===a?"/"===e:e===a||e.startsWith(`${a}/`)}function AppLayout({title:e,subtitle:a,children:n}){let l=(0,s.useRouter)(),{logout:d}=(0,u.a)(),[c,p]=(0,r.useState)(()=>!0),[v,_]=(0,r.useState)(()=>"light"),[b,y]=(0,r.useState)(null),[k,f]=(0,r.useState)({top:0}),L=(0,r.useRef)({}),N=(0,r.useRef)(null),[g,x]=(0,r.useState)(()=>{let e=l.pathname;return m.filter(a=>a.children?.some(a=>isPathActive(e,a.href))).map(e=>e.key)});(0,r.useEffect)(()=>{"undefined"!=typeof document&&(document.documentElement.dataset.theme=v,document.body.dataset.theme=v)},[v]),(0,r.useEffect)(()=>{},[c]),(0,r.useEffect)(()=>{c||x(e=>{let a=new Set(e);return m.forEach(e=>{e.children?.some(e=>isPathActive(l.pathname,e.href))&&a.add(e.key)}),Array.from(a)})},[l.pathname,c]);let j=(0,r.useMemo)(()=>{let e=l.pathname;return m.reduce((a,n)=>(n.href&&isPathActive(e,n.href)&&a.add(n.key),n.children?.forEach(t=>{isPathActive(e,t.href)&&(a.add(t.key),a.add(n.key))}),a),new Set)},[l.pathname]),A=l.pathname.startsWith("/settings"),T=(0,r.useMemo)(()=>{let e=new Set(j);return A&&e.add("settings"),e},[j,A]),handleToggleGroup=e=>{c||x(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e])},handleMouseEnterGroup=e=>{if(c){N.current&&(clearTimeout(N.current),N.current=null);let a=L.current[e];if(a){let e=a.getBoundingClientRect();f({top:e.top})}y(e)}},handleMouseLeaveGroup=()=>{c&&(N.current=setTimeout(()=>{y(null)},150))},handleCloseFlyout=()=>{y(null)},handleLogout=()=>{d(),l.replace("/login")},handleToggleTheme=()=>{_(e=>"dark"===e?"light":"dark")},handleFlyoutMouseEnter=()=>{N.current&&(clearTimeout(N.current),N.current=null)},handleFlyoutMouseLeave=()=>{c&&(N.current=setTimeout(()=>{y(null)},150))};(0,r.useEffect)(()=>{y(null)},[l.pathname]);let renderNavLink=e=>{let a=e.icon,n=j.has(e.key);return(0,t.jsxs)(i(),{href:e.href,className:`${h().navLink} ${n?h().navLinkActive:""}`,"data-testid":`sidebar-link-${e.key}`,title:e.description??e.label,"aria-current":n?"page":void 0,"aria-label":e.description??e.label,children:[t.jsx("span",{className:h().iconSlot,children:t.jsx(a,{})}),t.jsx("span",{className:h().linkLabel,children:e.label})]},e.key)},renderNavGroup=e=>{let a=e.icon,n=g.includes(e.key),r=j.has(e.key),l=c&&b===e.key;return(0,t.jsxs)("div",{className:h().navGroup,onMouseEnter:()=>handleMouseEnterGroup(e.key),onMouseLeave:handleMouseLeaveGroup,children:[(0,t.jsxs)("button",{ref:a=>{L.current[e.key]=a},type:"button",className:`${h().navGroupTrigger} ${r?h().navLinkActive:""}`,onClick:()=>handleToggleGroup(e.key),"aria-expanded":c?l:n,"aria-controls":c?`sidebar-flyout-${e.key}`:`sidebar-submenu-${e.key}`,"data-testid":`sidebar-group-${e.key}`,title:e.description??e.label,"aria-label":e.description??e.label,children:[(0,t.jsxs)("span",{className:h().iconSlot,children:[t.jsx(a,{}),c&&t.jsx("span",{className:h().collapsedIndicator,"aria-hidden":"true"})]}),t.jsx("span",{className:h().linkLabel,children:e.label}),t.jsx(o.bTu,{className:`${h().chevron} ${n?h().chevronOpen:""}`})]}),!c&&t.jsx("div",{id:`sidebar-submenu-${e.key}`,className:`${h().subNav} ${n?h().subNavOpen:""}`,role:"group",children:e.children.map(e=>{let a=j.has(e.key);return(0,t.jsxs)(i(),{href:e.href,className:`${h().subNavLink} ${a?h().navLinkActive:""}`,"data-testid":`sidebar-link-${e.key}`,title:e.label,"aria-current":a?"page":void 0,"aria-label":e.label,children:[t.jsx("span",{className:h().bullet,"aria-hidden":!0}),t.jsx("span",{className:h().linkLabel,children:e.label})]},e.key)})}),c&&l&&(0,t.jsxs)("div",{id:`sidebar-flyout-${e.key}`,className:h().flyoutMenu,role:"group","aria-label":`${e.label} submenu`,style:{top:`${k.top}px`},onMouseEnter:handleFlyoutMouseEnter,onMouseLeave:handleFlyoutMouseLeave,children:[t.jsx("div",{className:h().flyoutHeader,children:t.jsx("span",{className:h().flyoutTitle,children:e.label})}),t.jsx("div",{className:h().flyoutContent,children:e.children.map(e=>{let a=j.has(e.key);return t.jsx(i(),{href:e.href,className:`${h().flyoutLink} ${a?h().flyoutLinkActive:""}`,"data-testid":`sidebar-flyout-link-${e.key}`,title:e.label,"aria-current":a?"page":void 0,onClick:handleCloseFlyout,children:e.label},e.key)})})]})]},e.key)};return(0,t.jsxs)("div",{className:h().appShell,"data-testid":"app-root",children:[(0,t.jsxs)("aside",{id:"moneyflow-sidebar",className:`${h().sidebar} ${c?h().sidebarCollapsed:""}`,children:[(0,t.jsxs)("div",{className:h().brandSection,children:[t.jsx("button",{type:"button",className:h().collapseTrigger,onClick:()=>{p(e=>!e),y(null)},"aria-pressed":c,"data-testid":"sidebar-collapse-toggle","aria-label":c?"Expand sidebar":"Collapse sidebar",children:t.jsx(o.cur,{})}),t.jsx(i(),{href:"/transactions",className:h().brandLink,"aria-label":"Money Flow home","data-testid":"sidebar-brand",children:t.jsx("div",{className:h().brandCopy,children:t.jsx("span",{className:h().brandName,children:"Money Flow"})})})]}),t.jsx("nav",{className:h().nav,role:"navigation","aria-label":"Primary",children:m.map(e=>e.children?renderNavGroup(e):renderNavLink(e))}),(0,t.jsxs)("div",{className:h().sidebarFooter,children:[(0,t.jsxs)(i(),{href:"/settings",className:`${h().navLink} ${A?h().navLinkActive:""}`,"data-testid":"sidebar-link-settings",title:"Settings","aria-label":"Settings","aria-current":A?"page":void 0,children:[t.jsx("span",{className:h().iconSlot,children:t.jsx(o.nbt,{})}),t.jsx("span",{className:h().linkLabel,children:"Settings"})]}),(0,t.jsxs)("button",{type:"button",className:h().navLink,onClick:handleToggleTheme,"data-testid":"dark-mode-toggle","aria-pressed":"dark"===v,"aria-label":"Toggle dark mode",title:"Toggle dark mode",children:[t.jsx("span",{className:h().iconSlot,children:"dark"===v?t.jsx(o.kXG,{}):t.jsx(o.wOW,{})}),t.jsx("span",{className:h().linkLabel,children:"Dark Mode"})]}),(0,t.jsxs)("button",{type:"button",className:h().navLink,onClick:handleLogout,"data-testid":"logout-button","aria-label":"Logout",title:"Logout",children:[t.jsx("span",{className:h().iconSlot,children:t.jsx(o.xqh,{})}),t.jsx("span",{className:h().linkLabel,children:"Logout"})]})]})]}),(0,t.jsxs)("div",{className:h().mainColumn,children:[t.jsx("div",{className:h().topNavBarContainer,children:t.jsx(TopNavBar,{navItems:m,activeKeys:T,onToggleTheme:handleToggleTheme,onLogout:handleLogout,theme:v,settingsLink:{key:"settings",label:"Settings",href:"/settings"}})}),t.jsx("main",{className:h().mainContent,"data-testid":"layout-main",children:n})]})]})}}};