"use strict";exports.id=7492,exports.ids=[7492],exports.modules={3465:(e,t,n)=>{n.a(e,async(e,r)=>{try{n.d(t,{fj:()=>h});var a=n(7612),i=n(8358),s=n(6340),o=n(3685),c=e([a,i,s,o]);[a,i,s,o]=c.then?(await c)():c;let l=(0,i.pgEnum)("subscription_type",["youtube","icloud","spotify","netflix","other"]),u=(0,i.pgEnum)("subscription_interval",["weekly","monthly","quarterly","yearly","custom"]),d=(0,i.pgEnum)("subscription_status",["active","paused","cancelled"]),p=(0,i.pgEnum)("subscription_member_role",["owner","member","participant","viewer"]),m=(0,i.pgEnum)("subscription_member_status",["active","left","inactive","pending"]),_=(0,i.pgTable)("subscriptions",{subscriptionId:(0,i.varchar)("subscription_id",{length:36}).primaryKey(),name:(0,i.varchar)("name",{length:180}).notNull(),provider:(0,i.varchar)("provider",{length:120}),type:l("type").notNull(),pricePerMonth:(0,i.numeric)("price_per_month",{precision:12,scale:2}).notNull(),currencyCode:(0,i.varchar)("currency_code",{length:10}).default("USD"),billingInterval:u("billing_interval").notNull(),nextBillingDate:(0,i.date)("next_billing_date"),ownerId:(0,i.varchar)("owner_id",{length:36}).notNull().references(()=>s.M.personId,{onDelete:"restrict"}),billingAccountId:(0,i.varchar)("billing_account_id",{length:36}).notNull().references(()=>o.MI.accountId,{onDelete:"restrict"}),status:d("status").notNull().default("active"),imageUrl:(0,i.text)("image_url"),notes:(0,i.text)("notes"),createdAt:(0,i.timestamp)("created_at",{withTimezone:!0}).defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at",{withTimezone:!0}).defaultNow().notNull()},e=>({subscriptionNameAccountIdx:(0,i.uniqueIndex)("subscriptions_account_name_uidx").on(e.billingAccountId,e.name)})),h=(0,i.pgTable)("subscription_members",{memberId:(0,i.varchar)("member_id",{length:36}).primaryKey(),subscriptionId:(0,i.varchar)("subscription_id",{length:36}).notNull().references(()=>_.subscriptionId,{onDelete:"cascade"}),personId:(0,i.varchar)("person_id",{length:36}).notNull().references(()=>s.M.personId,{onDelete:"cascade"}),reimbursementAccountId:(0,i.varchar)("reimbursement_account_id",{length:36}).references(()=>o.MI.accountId,{onDelete:"set null"}),role:p("role").notNull().default("participant"),joinDate:(0,i.date)("join_date").notNull(),leaveDate:(0,i.date)("leave_date"),shareRatio:(0,i.numeric)("share_ratio",{precision:5,scale:4}),status:m("status").notNull().default("active"),notes:(0,i.text)("notes"),createdAt:(0,i.timestamp)("created_at",{withTimezone:!0}).defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at",{withTimezone:!0}).defaultNow().notNull()},e=>({subscriptionMemberUnique:(0,i.uniqueIndex)("subscription_members_subscription_person_idx").on(e.subscriptionId,e.personId),shareRatioBounds:(0,i.check)("subscription_members_share_ratio_check",a.sql`share_ratio IS NULL OR (share_ratio >= 0 AND share_ratio <= 1)`),subscriptionFk:(0,i.foreignKey)({columns:[e.subscriptionId],foreignColumns:[_.subscriptionId],name:"subscription_members_subscription_id_fkey"}).onDelete("cascade").onUpdate("cascade"),personFk:(0,i.foreignKey)({columns:[e.personId],foreignColumns:[s.M.personId],name:"subscription_members_person_id_fkey"}).onDelete("cascade").onUpdate("cascade"),reimbursementAccountFk:(0,i.foreignKey)({columns:[e.reimbursementAccountId],foreignColumns:[o.MI.accountId],name:"subscription_members_reimbursement_account_id_fkey"}).onDelete("set null").onUpdate("cascade")}));r()}catch(e){r(e)}})},7492:(e,t,n)=>{n.a(e,async(e,r)=>{try{n.d(t,{bn:()=>p,dx:()=>_,tV:()=>m});var a=n(7612),i=n(8358),s=n(3685),o=n(6986),c=n(6340),l=n(6391),u=n(3465),d=e([a,i,s,o,c,l,u]);[a,i,s,o,c,l,u]=d.then?(await d)():d;let p=(0,i.pgEnum)("transaction_type",["expense","income","debt","repayment","cashback","subscription","import","adjustment"]),m=(0,i.pgEnum)("transaction_status",["active","pending","void","canceled"]),_=(0,i.pgTable)("transactions",{transactionId:(0,i.varchar)("transaction_id",{length:36}).primaryKey(),accountId:(0,i.varchar)("account_id",{length:36}).notNull().references(()=>s.MI.accountId,{onDelete:"restrict"}),personId:(0,i.varchar)("person_id",{length:36}).references(()=>c.M.personId,{onDelete:"set null"}),shopId:(0,i.varchar)("shop_id",{length:36}).references(()=>l.Of.shopId,{onDelete:"set null"}),type:p("type").notNull(),categoryId:(0,i.varchar)("category_id",{length:36}).references(()=>o.b.categoryId,{onDelete:"set null"}),subscriptionMemberId:(0,i.varchar)("subscription_member_id",{length:36}).references(()=>u.fj.memberId,{onDelete:"set null"}),linkedTxnId:(0,i.varchar)("linked_txn_id",{length:36}).references(()=>g.linkedTxnId,{onDelete:"set null"}),status:m("status").notNull(),amount:(0,i.numeric)("amount",{precision:18,scale:2}).notNull(),fee:(0,i.numeric)("fee",{precision:18,scale:2}),occurredOn:(0,i.date)("occurred_on").notNull(),notes:(0,i.text)("notes"),createdAt:(0,i.timestamp)("created_at",{withTimezone:!0}).defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at",{withTimezone:!0}).defaultNow().notNull()}),h=(0,i.pgEnum)("linked_txn_type",["refund","split","batch","settle"]),b=(0,i.pgEnum)("linked_txn_status",["active","done","canceled"]),g=(0,i.pgTable)("linked_transactions",{linkedTxnId:(0,i.varchar)("linked_txn_id",{length:36}).primaryKey(),parentTxnId:(0,i.varchar)("parent_txn_id",{length:36}).references(()=>_.transactionId,{onDelete:"set null"}),type:h("type").notNull(),relatedTxnIds:(0,i.varchar)("related_txn_ids",{length:36}).array().notNull().default(a.sql`ARRAY[]::varchar[]`),notes:(0,i.text)("notes"),status:b("status").notNull(),createdAt:(0,i.timestamp)("created_at",{withTimezone:!0}).defaultNow().notNull(),updatedAt:(0,i.timestamp)("updated_at",{withTimezone:!0}).defaultNow().notNull()},e=>({parentTxnFk:(0,i.foreignKey)({columns:[e.parentTxnId],foreignColumns:[_.transactionId],name:"linked_transactions_parent_txn_id_fkey"}).onDelete("set null").onUpdate("cascade")}));r()}catch(e){r(e)}})}};