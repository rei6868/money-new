"use strict";(()=>{var e={};e.id=2676,e.ids=[2676],e.modules={1081:e=>{e.exports=require("dotenv/config")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},7612:e=>{e.exports=import("drizzle-orm")},1749:e=>{e.exports=import("drizzle-orm/node-postgres")},8358:e=>{e.exports=import("drizzle-orm/pg-core")},8678:e=>{e.exports=import("pg")},7287:(e,t,r)=>{r.a(e,async(e,o)=>{try{r.r(t),r.d(t,{config:()=>l,default:()=>p,routeModule:()=>c});var a=r(1802),s=r(7153),n=r(6249),i=r(8708),d=e([i]);i=(d.then?(await d)():d)[0];let p=(0,n.l)(i,"default"),l=(0,n.l)(i,"config"),c=new a.PagesAPIRouteModule({definition:{kind:s.x.PAGES_API,page:"/api/transactions/types",pathname:"/api/transactions/types",bundlePath:"",filename:""},userland:i});o()}catch(e){o(e)}})},8708:(e,t,r)=>{r.a(e,async(e,o)=>{try{r.r(t),r.d(t,{default:()=>handler});var a=r(7612),s=r(4379),n=r(7492),i=e([a,s,n]);async function handler(e,t){if("GET"!==e.method){t.setHeader("Allow",["GET"]),t.status(405).json({error:"Method not allowed"});return}let r=s.db;if(!r){t.status(500).json({error:"Database connection is not configured"});return}try{let e=await r.select({type:n.dx.type}).from(n.dx).groupBy(n.dx.type),o=Array.from(new Set(e.map(e=>"string"==typeof e.type?e.type.trim():"").filter(e=>e.length>0))),s=await r.select({count:a.sql`count(*)`}).from(n.dx).where(a.sql`${n.dx.type} = 'expense' AND ${n.dx.linkedTxnId} IS NOT NULL`),i=Number(s[0]?.count??0);t.status(200).json({types:o,transfer:{baseType:"expense",count:i}})}catch(e){console.error("Failed to load transaction types",e),t.status(500).json({error:"Failed to load transaction types"})}}[a,s,n]=i.then?(await i)():i,o()}catch(e){o(e)}})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[4222,4379,6340,3902,6986,6391,7492],()=>__webpack_exec__(7287));module.exports=r})();