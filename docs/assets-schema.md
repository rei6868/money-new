# Assets Table Schema

The Assets table records savings, investments, real estate, collateral, and other holdings owned by people or groups in the platform. It supports credit underwriting workflows, portfolio dashboards, and reporting pipelines that require both valuation history and ownership transparency.

## Drizzle ORM Definition

```ts
import { assets } from "@/db/schema/assets";
```

See [`src/db/schema/assets.ts`](../src/db/schema/assets.ts) for the full implementation with inline documentation.

## Field Reference

| Field | Type | Required | Business Logic & Purpose |
|-------|------|----------|---------------------------|
| `assetId` | `varchar(36)` | ✅ | Primary key for the asset; typically a UUID generated by ingestion services. |
| `assetName` | `varchar(180)` | ✅ | Human readable label displayed on dashboards, reports, and loan applications. |
| `assetType` | `asset_type` enum | ✅ | Controls reporting groupings (`saving`, `invest`, `real_estate`, `crypto`, `bond`, `collateral`, `other`). |
| `ownerId` | `varchar(36)` | ✅ | References the People table so every asset is attributable to a person or group. |
| `linkedAccountId` | `varchar(36)` | ⛔️ (optional) | Connects the asset to an Account when it secures a loan/credit line or mirrors a ledger balance. |
| `status` | `asset_status` enum | ✅ | Tracks lifecycle: `active`, `sold`, `transferred`, or `frozen` for compliance and reporting. |
| `currentValue` | `numeric(18,2)` | ✅ | Latest appraised/market value used for net worth and underwriting calculations. |
| `initialValue` | `numeric(18,2)` | ⛔️ (optional) | Original purchase price or cost basis for profit and depreciation analysis. |
| `currency` | `varchar(10)` | ⛔️ (optional) | ISO currency code for both `currentValue` and `initialValue`. |
| `acquiredAt` | `date` | ⛔️ (optional) | Ownership start date retained even when the asset is imported later. |
| `imgUrl` | `text` | ⛔️ (optional) | CDN link to supporting imagery or documents (titles, appraisals, receipts). |
| `notes` | `text` | ⛔️ (optional) | Free-form operational context such as valuation assumptions or collateral notes. |
| `createdAt` | `timestamptz` | ✅ | Timestamp of insertion for auditing and sync jobs (defaults to `now()`). |
| `updatedAt` | `timestamptz` | ✅ | Last modification timestamp maintained by application logic. |

## Implementation Notes

- **Asset ↔ Account linkage:** `linkedAccountId` allows underwriting teams to trace which asset backs a loan or credit line. When present, account screens can surface the collateral metadata, while dashboards can highlight which holdings are encumbered.
- **Valuation updates:** Application services should update `currentValue` whenever new appraisals or market quotes are received. Historical valuations can be stored in a future `asset_valuations` table keyed by `assetId` for trend analysis without overwriting `initialValue`.
- **Status transitions:** Assets typically start as `active`. When ownership is transferred or the asset is liquidated, services should mark the record as `sold` or `transferred`. Assets placed as collateral under dispute or regulatory hold should use the `frozen` state until cleared, at which point they can revert to `active`.
